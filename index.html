<!DOCTYPE html>
<html lang="pt-br">
  <head>
  <meta charset="UTF-8" />
  <title>Painel de Coleta</title>
  <style>
    body {
  margin: 0;
  font-family: 'Poppins', 'Arial', sans-serif; /* Fonte mais moderna */
  background: linear-gradient(135deg, #c0e0e7, #ffffff); /* Gradiente mais "diagonal" */
  min-height: 100vh;
  display: flex;
  overflow-x: hidden;
}
    .login-container, .main-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .login-box {
      background: #fff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      text-align: center;
    }
    .login-box input {
      width: 90%;
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 10px;
    }
    .login-box button {
      background-color: #6EC1E4;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      width: 100%;
    }
    .sidebar {
      width: 220px;
      background: linear-gradient(180deg, #a7c7e7, #e0f7fa);
      padding-top: 20px;
      height: 100vh;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }

    .sidebar h2 {
  text-align: center;
  color: #064273;
  font-size: 22px;
  font-weight: 600;
  margin-bottom: 40px;
}

    .sidebar button {
      width: 180px;
      margin: 10px auto;
      display: block;
      padding: 12px;
      border: none;
      background-color: #064273;
      color: white;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0px 4px 6px rgba(0,0,0,0.1);
      transition: 0.3s;
    }

    .sidebar button:hover {
      background-color: #046bac;
    }

    .main {
      flex: 1;
      padding: 30px;
    }

    .card {
      display: none;
      background-color: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      animation: fadeIn 0.5s;
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    label {
      display: block;
      margin-top: 10px;
    }

    input, textarea, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button.enviar {
      margin-top: 20px;
      padding: 12px;
      background-color: #064273;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 150px;
      box-shadow: 0px 4px 6px rgba(0,0,0,0.1);
    }

    .success, .error {
      margin-top: 15px;
      font-weight: bold;
    }
    .success { color: green; }
    .error { color: red; }

    #formAdmissao {
    max-width: 900px;
    margin: auto;
    font-family: 'Poppins', sans-serif;
    background: #f9f9f9;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 0 10px rgba(0,0,0,0.08);
  }

  #formAdmissao label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
    color: #333;
  }

  #formAdmissao input,
  #formAdmissao select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border: 1px solid #ccc;
    border-radius: 8px;
    box-sizing: border-box;
  }

  #formAdmissao fieldset {
    border: 1px solid #ddd;
    border-radius: 10px;
    padding: 15px;
    margin-top: 20px;
    background-color: #fff;
  }

  #formAdmissao legend {
    font-size: 16px;
    font-weight: bold;
    color: #2a5d8f;
  }

  #dadosPacienteAdmissao {
    margin-top: 20px;
    padding: 10px;
    background-color: #eef6fb;
    border-radius: 8px;
  }

  input[disabled] {
    background-color: #e9ecef;
    color: #495057;
    font-weight: 500;
  }

  .botoes-pacientes h3 {
    margin-top: 20px;
    font-size: 1rem;
    color: #333;
  }

  .grupo-botoes {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 10px;
    margin-bottom: 20px;
  }

  .grupo-botoes button {
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
    background-color: #f9f9f9;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  .grupo-botoes button:hover {
    background-color: #e0e0e0;
  }

.card {
  max-height: 90vh;
  overflow-y: auto;
}

</style>
</head>

<body>

<!-- Tela de Login -->
<div class="login-container" id="loginScreen">
  <div class="login-box">
    <!-- √çcone -->
    <img src="https://img.icons8.com/ios-filled/100/064273/hospital-room.png" alt="GestCare Logo" style="margin-bottom: 15px;">
    
    <!-- T√≠tulo -->
    <h2 style="color: #064273;">SACE - Sistema de Apoio ao Cuidado de Enfermagem</h2>
    <p style="font-weight: bold; margin-bottom: 10px;">Ferramenta de apoio ao Processo de Enfermagem, de Gest√£o da Assist√™ncia Domiciliar em Sa√∫de para Homecare e Institui√ß√µes de Longa Perman√™ncia para Idosos</p>
    
    <!-- Descri√ß√£o -->
    <p style="font-size: 14px; margin-bottom: 20px; color: #555;">Solu√ß√£o integrada para gest√£o assistencial, registro cl√≠nico qualificado e acompanhamento seguro no cuidado domiciliar e institucional.</p>
    
    <!-- Login -->
    <h3>Fa√ßa seu login</h3>
    <input type="text" id="matricula" placeholder="Digite sua matr√≠cula" style="margin-top: 10px;">
    <button onclick="validarMatricula()">Entrar</button>
    
    <p id="errorMessage" style="color:red; display:none; margin-top: 10px;">Matr√≠cula inv√°lida! Verifique e tente novamente.</p>
    
    <hr style="margin: 20px 0; border-color: #ccc;">
    
    <!-- Rodap√© -->
    <div style="font-size: 12px; color: #777; margin-top: 10px;">
      Desenvolvido por <strong>Enfermeira Gabriela de Alencar Veiga Galdino</strong><br>
      COREN RJ 608996<br>
      Produto do Mestrado em Telessa√∫de e Sa√∫de Digital<br>
      Universidade do Estado do Rio de Janeiro (UERJ) ‚Äì 2024/2026
    </div>
  </div>
</div>

<!-- Tela Principal + Menu -->
<div class="main-container" id="mainScreen" style="display:none;">
  
<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <h2 style="color:#064273; text-align:center;">Menu</h2>
    <!-- Bot√µes din√¢micos -->
</div>

<!-- Tela de Boas vindas -->
<div class="card" id="bemvindoCard">

  <h1 style="color:#064273;">Bem-vindo ao <strong>SACE ‚Äì Sistema de Apoio ao Cuidado em Enfermagem</strong></h1>

  <p style="font-weight: bold; margin-bottom: 10px;">‚Äì Plataforma para Consult√≥rio de Enfermagem, Home Care e ILPIs</p>

  <p style="font-size: 16px; color:#555; max-width:800px; line-height:1.6;">
    O <strong>SACE</strong> √© uma ferramenta desenvolvida <strong>de Enfermeira para Enfermeiros</strong>, alinhada √†s diretrizes do 
    <strong>Processo de Enfermagem</strong> e √†s normativas do <strong>Conselho Federal de Enfermagem (Cofen)</strong> e dos 
    <strong>Conselhos Regionais (Coren)</strong>. Seu objetivo √© apoiar o registro cl√≠nico e a gest√£o assistencial nos contextos de 
    <strong>aten√ß√£o domiciliar, consult√≥rios de enfermagem e institui√ß√µes de longa perman√™ncia para idosos</strong>.
  </p>

  <p style="font-size: 16px; color:#555; max-width:800px; line-height:1.6;">
    Esta plataforma opera exclusivamente como uma <strong>interface de entrada de dados</strong>. Todos os registros s√£o realizados de forma segura, 
    individualizada e <strong>sem qualquer compartilhamento externo de informa√ß√µes</strong>. N√£o h√° retirada, exporta√ß√£o nem visualiza√ß√£o de dados por terceiros, 
    garantindo a <strong>confidencialidade, integridade e o cumprimento √©tico da profiss√£o</strong>.
  </p>

  <p style="font-size: 16px; color:#555; max-width:800px; line-height:1.6;">
    O acesso √© restrito e protegido por senha. Ao utilizar esta ferramenta, o profissional assume <strong>responsabilidade √©tica e legal sobre os dados inseridos</strong>, 
    conforme previsto nos c√≥digos de conduta e sigilo profissional da Enfermagem.
  </p>

  <p style="font-size: 16px; color:#555; max-width:800px; line-height:1.6;">
    O <strong>SACE</strong> proporciona um ambiente seguro e eficiente para o registro, acompanhamento e gest√£o do cuidado em <strong>aten√ß√£o domiciliar</strong> e 
    <strong>institui√ß√µes de longa perman√™ncia</strong>, promovendo qualidade, rastreabilidade e suporte √† tomada de decis√£o.
  </p>

  <div style="margin-top: 30px; background: #e0f7fa; padding: 20px; border-radius: 12px; max-width:850px; box-shadow: 0 4px 8px rgba(0,0,0,0.05);">
    <h3 style="color:#064273;">üìã Orienta√ß√µes</h3>
    <ul style="list-style: none; padding-left: 0; color:#333; font-size:15px;">
      <li>‚úîÔ∏è Use o menu lateral para acessar os formul√°rios e funcionalidades.</li>
      <li>‚úîÔ∏è Registre admiss√µes, consultas, evolu√ß√µes e intercorr√™ncias com seguran√ßa.</li>
      <li>‚úîÔ∏è Todos os registros seguem padr√µes √©ticos, t√©cnicos e assistenciais atualizados.</li>
    </ul>
    <p style="margin-top:15px; font-size:14px; color:#666;">D√∫vidas ou sugest√µes? Entre em contato com a respons√°vel t√©cnica pelo sistema. E-mail: enfaveigagaldino@gmail.com</p>
  </div>
</div>

<!-- Card de Orienta√ß√µes gerais para a RT -->
<div class="card" id="orientacaoCard" style="max-width: 900px; margin: 0 auto; padding: 25px;">
  <h2 style="color: #064273; margin-bottom: 20px;">Sistema de Gest√£o Cl√≠nica em Enfermagem ‚Äì <strong>SACE</strong></h2>
  
  <p style="font-size: 16px; line-height: 1.8; color: #444;">
    O <strong>SACE ‚Äì Sistema de Apoio ao Cuidado em Enfermagem</strong> foi desenvolvido pela <strong>Enfermeira Gabriela de Alencar Veiga Galdino</strong> (COREN-RJ 608996), como produto do <strong>Mestrado em Telessa√∫de e Sa√∫de Digital</strong> da <strong>Universidade do Estado do Rio de Janeiro (UERJ)</strong>, sob orienta√ß√£o da Professora <strong>Helena Maria Scherlowski Leal David</strong>.
  </p>

  <p style="font-size: 16px; line-height: 1.8; color: #444;">
    Esta plataforma foi cuidadosamente concebida para fortalecer a atua√ß√£o da <strong>Enfermagem</strong> ‚Äì tanto de n√≠vel superior quanto t√©cnico ‚Äì nos contextos da <strong>Aten√ß√£o Domiciliar</strong> e das <strong>Institui√ß√µes de Longa Perman√™ncia para Idosos (ILPIs)</strong>.
  </p>

  <div style="background-color: #f0f8ff; padding: 20px; border-radius: 12px; margin: 20px 0;">
    <h4 style="color: #064273;">‚ú® Benef√≠cios do SACE:</h4>
    <ul style="list-style: none; padding-left: 0; color: #333; font-size: 15px; line-height: 1.8;">
      <li>‚úîÔ∏è Interface intuitiva e de f√°cil navega√ß√£o;</li>
      <li>‚úîÔ∏è Instrumentos assistenciais e gerenciais alinhados √†s normativas profissionais vigentes;</li>
      <li>‚úîÔ∏è Seguran√ßa e efici√™ncia no registro das condutas de enfermagem;</li>
      <li>‚úîÔ∏è Integra√ß√£o com pr√°ticas de Telenfermagem e gest√£o remota do cuidado;</li>
      <li>‚úîÔ∏è Suporte √† Sistematiza√ß√£o do Processo de Enfermagem e √†s atribui√ß√µes legais da profiss√£o.</li>
    </ul>
  </div>

  <p style="font-size: 16px; line-height: 1.8; color: #444;">
    Todos os instrumentos dispon√≠veis no sistema seguem valida√ß√µes e recomenda√ß√µes do <strong>Minist√©rio da Sa√∫de</strong>, dos <strong>Conselhos Regionais de Enfermagem (Coren)</strong> e do <strong>Conselho Federal de Enfermagem (Cofen)</strong>, assegurando <strong>padroniza√ß√£o</strong>, <strong>confiabilidade</strong> e <strong>seguran√ßa</strong> na pr√°tica assistencial.
  </p>

  <p style="font-size: 14px; margin-top: 25px; color: #777;">
    D√∫vidas ou sugest√µes? Entre em contato com a respons√°vel t√©cnica pelo sistema, e-mail: enfaveigagaldino@gmail.com </p>
</div>

<!-- Card de Cadastro de novo Cliente - N√ÉO ALTERAR MAIS -->
<div id="cardCadastro" class="card" style="display:none;">
  <h2 style="color: #064273; margin-bottom: 20px;">Sistema de Gest√£o Cl√≠nica em Enfermagem ‚Äì <strong>SACE</strong></h2>
  <h2>Cadastro Administrativo de Novos Clientes</h2>

  <form id="formCadastro" onsubmit="event.preventDefault(); enviarCadastro();">
  
  <!-- SE√á√ÉO 1: DADOS PESSOAIS -->
  <h3> üßç Dados Pessoais</h3>

    <label>Nome completo do paciente:</label>
    <input type="text" name="nomePaciente" required>

    <label>N√∫mero do prontu√°rio (gerado automaticamente):</label>
    <div style="display: flex; gap: 10px; align-items: center;">
      <input type="text" name="nomeId" id="nomeId" readonly style="flex: 1;">
      <button type="button" onclick="gerarIdentificador()">Gerar Identificador</button>
    </div>

    <label>Data de nascimento:</label>
    <input type="date" name="dataNascimento" required>

    <label>CPF:</label>
    <input type="text" name="cpf">

    <label>CNS (Cart√£o Nacional de Sa√∫de):</label>
    <input type="text" name="cns">

    <label>Nome da m√£e:</label>
    <input type="text" name="nomeMae">

    <label>Sexo:</label>
    <select name="sexo" required>
      <option value="" disabled selected>Selecione...</option>
      <option value="Feminino">Feminino</option>
      <option value="Masculino">Masculino</option>
      <option value="Outro">Outro</option>
    </select>

    <!-- SE√á√ÉO 2: CONTATO E LOCALIZA√á√ÉO -->
    <h3>üìç Contato e Localiza√ß√£o</h3>

    <label>Tipo de resid√™ncia:</label>
    <select name="tipoResidencia" required>
      <option value="" disabled selected>Selecione...</option>
      <option value="Domic√≠lio">Domic√≠lio</option>
      <option value="ILPI">ILPI (Institui√ß√£o de Longa Perman√™ncia)</option>
    </select>

    <label>Endere√ßo completo:</label>
    <input type="text" name="endereco">

    <label>Telefone / WhatsApp:</label>
    <input type="text" name="telefone">

    <!-- SE√á√ÉO 3: CUIDADOR / RESPONS√ÅVEL -->
    <h3>üë• Respons√°vel pelo Paciente</h3>

    <label>Nome do respons√°vel legal/cuidador:</label>
    <input type="text" name="responsavelLegal">

    <label>Necessita de cuidados 24h?</label>
    <select name="cuidados24h">
      <option value="" disabled selected>Selecione...</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
    </select>

    <!-- SE√á√ÉO 4: PLANO DE SA√öDE -->
    <h3>üè• Plano de Sa√∫de</h3>

    <label>Plano de Sa√∫de / Conv√™nio:</label>
    <input type="text" name="planoSaude">

    <label>N√∫mero da carteirinha:</label>
    <input type="text" name="carteirinha">

    <label>Validade do plano:</label>
    <input type="date" name="validadePlano">

     <!-- SE√á√ÉO 5: CLASSIFICA√á√ÉO DO ATENDIMENTO -->
    <h3>üìÑ Classifica√ß√£o do Atendimento</h3>

    <label>Tipo de atendimento:</label>
    <select name="tipoAtendimento" id="tipoAtendimento" required>
  <option value="" disabled selected>Selecione...</option>
  <option>AD1 - Aten√ß√£o domiciliar de baixa complexidade</option>
  <option>AD2 - Aten√ß√£o domiciliar de m√©dia complexidade</option>
  <option>AD3 - Aten√ß√£o domiciliar de alta complexidade</option>
</select>

  <label>Categoria do paciente:</label>
  <select name="categoriaPaciente" id="categoriaPaciente" required>
  <option value="" disabled selected>Selecione...</option>
  <option value="Curativo Complexo">Curativo Complexo</option>
  <option value="Paciente Terminal">Paciente Terminal</option>
  <option value="Reabilita√ß√£o">Reabilita√ß√£o</option>
  <option value="Alta Complexidade Pedi√°trica">Alta Complexidade Pedi√°trica</option>
  <option value="Paciente com Dem√™ncia Avan√ßada">Paciente com Dem√™ncia Avan√ßada</option>
  <option value="Acompanhamento de Condi√ß√£o Cr√¥nica Complexa">Acompanhamento de Condi√ß√£o Cr√¥nica Complexa</option>
  <option value="Outro">Outro</option>
</select>

  <!-- SE√á√ÉO 6: EQUIPE RESPONS√ÅVEL -->
    <h3>üßë‚Äç‚öïÔ∏è Equipe de Enfermagem</h3>

    <!-- Lista suspensa para escolher a equipe -->
    <label><strong>Equipe de Enfermagem respons√°vel pelo cuidado:</strong></label>
    <select id="selectEquipe" name="equipeResponsavel" onchange="atualizarEquipe()" required>
      <option value="">Selecione a equipe</option>
      <option value="Equipe Florence">Equipe Florence</option>
      <option value="Equipe Horta">Equipe Horta</option>
      <option value="Equipe Nery">Equipe Nery</option>
      <option value="Equipe Peplau">Equipe Peplau</option>
    </select>

<!-- Confirma√ß√£o visual (opcional) -->
<p id="equipeSelecionadaTexto" style="margin-top: 8px; font-weight: bold; color: darkblue;"></p>
    <!-- Sele√ß√£o do enfermeiro respons√°vel -->
    <label><strong>Enfermeiro Respons√°vel:</strong></label>
    <select name="enfermeiroResponsavel" id="enfermeiroResponsavel" required>
      <option value="">Selecione a equipe primeiro...</option>
    </select>

    <!-- Sele√ß√£o m√∫ltipla dos t√©cnicos -->
    <label><strong>T√©cnicos de Enfermagem:</strong></label>
    <select name="tecnicosResponsaveis" id="tecnicosResponsaveis" multiple required>
      <option value="">Selecione a equipe primeiro...</option>
    </select>

 <!-- SE√á√ÉO 7: OBSERVA√á√ïES FINAIS -->
    <h3>üìù Observa√ß√µes</h3>


  <label>Observa√ß√µes administrativas:</label>
  <textarea name="observacoes" rows="3" placeholder="Informa√ß√µes adicionais relevantes..."></textarea>

    <button type="button" class="enviar" onclick="enviarCadastro()">Enviar</button>
    <p id="msgCadastro"></p>
  </form>
</div>

<!-- CARD ADMISSAO DE ENFERMAGEM - N√ÉO ALTERAR MAIS -->
<div class="card" id="admissaoCard">
<h2>Admiss√£o de Enfermagem para Aten√ß√£o Domiciliar - Enfermeiro</h2>
<p> Instrumento adaptado. Refer√™ncia: Recomenda√ß√µes para Registros de Enfermagem no Exerc√≠cio da Profiss√£o. Conselho Federal de Enfermagem. 2023.</p>
   
  <form id="formAdmissao">
  <label>Data do registro no sistema Gest-Care:</label>
  <input type="date" name="data" required>

  <fieldset>
    <legend>Identifica√ß√£o autom√°tica do Paciente</legend>

    <label>Selecione o paciente:</label>
    <select id="listaPacientes" onchange="preencherCamposAdmissao()" required>
      <option value="">Selecione...</option>
    </select>

    <input type="hidden" id="campoNomeIdAdmissao" name="nomeId">

    <div id="dadosPacienteAdmissao" style="display: none;">
      <input type="hidden" id="campoNomePaciente" name="nomePaciente">
      <input type="hidden" id="campoNascimento" name="dataNascimento">
      <input type="hidden" id="campoSexo" name="sexo">
      <input type="hidden" id="campoEquipe" name="equipe">
      <input type="hidden" id="campoStatus" name="status">

      <label>Prontu√°rio:</label>
      <input type="text" id="exibeNomeId" disabled>

      <label>Data de Nascimento:</label>
      <input type="text" id="exibeDataNascimento" disabled>

      <label>Sexo:</label>
      <input type="text" id="exibeSexo" disabled>

      <label>Equipe:</label>
      <input type="text" id="exibeEquipe" disabled>

    </div>
  </fieldset>

      <fieldset>
      <label>Data e hora da Admiss√£o Cl√≠nica:</label>
      <input type="datetime-local" name="dataHora" required>
      </fieldset>

      <fieldset>
        <label>Status do Atendimento:</label>
        <select name="statusAtendimento" required>
        <option value="" disabled selected>Selecione...</option>
        <option value="Em atendimento">Em atendimento</option>
        <option value="Alta">Alta</option>
        <option value="√ìbito">√ìbito</option>
        </select>

       <label>Proced√™ncia do paciente:</label>
        <select name="procedencia" required>
        <option value="" disabled selected>Selecione...</option>
        <option value="Domic√≠lio">Domic√≠lio</option>
        <option value="Hospital">Hospital</option>
        <option value="ILPI">ILPI (Institui√ß√£o de Longa Perman√™ncia)</option>
        </select>
      
        <label>Condi√ß√µes de chegada:</label>
        <select name="condicoesChegada" required>
        <option value="" disabled selected>Selecione...</option>
        <option value="Est√°vel">Est√°vel</option>
        <option value="Est√°vel com suporte">Est√°vel com suporte</option>
        <option value="Fr√°gil">Fr√°gil</option>
        <option value="Grave">Grave</option>
        </select>

        <label>N√≠vel de consci√™ncia:</label>
        <select name="nivelConsciencia" required>
        <option value="" disabled selected>Selecione...</option>
        <option value="Consciente">Consciente</option>
        <option value="Desorientado">Desorientado</option>
        <option value="Rebaixado">Rebaixado</option>
        </select>

        <label>Presen√ßa de acompanhante ou respons√°vel:</label>
        <input type="text" name="acompanhante">

        <label>Condi√ß√µes de higiene:</label>
        <select name="higiene" required>
        <option value="" disabled selected>Selecione...</option>
        <option value="Prejudicada">Prejudicada</option>
        <option value="Preservada">Preservada</option>
        <option value="Parcial - Necessita aux√≠lio para banho e higiene √≠ntima">Parcial -  Necessita aux√≠lio para banho e higiene √≠ntima</option>
        </select>

        <label>Presen√ßa de les√µes pr√©vias e localiza√ß√£o:</label>
        <textarea name="lesoes"></textarea>

        <label>Defici√™ncias (se houver):</label>
        <select name="deficiencias" required>
        <option value="" disabled selected>Selecione...</option>
        <option value="Cognitiva">Cognitiva</option>
        <option value="Motora">Motora</option>
        <option value="Sensorial">Sensorial</option>
        <option value="N√£o">N√£o</option>
        </select>

        <label>Uso de pr√≥teses ou √≥rteses:</label>
        <textarea name="protese"></textarea>

        <label>Queixas relacionadas ao motivo da interna√ß√£o:</label>
        <textarea name="queixas"></textarea>

        <label>Procedimentos/cuidados realizados:</label>
        <textarea name="procedimentos"></textarea>

       <label>Orienta√ß√µes prestadas:</label>
       <p>
       <input type="checkbox" name="orientacoesPadrao" checked required>
       Confirmo que o paciente foi orientado quanto ao plano de cuidado, mudan√ßa de dec√∫bito e hidrata√ß√£o.
       </p>
      </fieldset>

  <fieldset>
  <legend><h4>Escala de Braden - Avalia√ß√£o do Risco de Les√£o por Press√£o</h4></legend>

  <label>Percep√ß√£o sensorial:</label>
  <select name="percepcaoSensorial" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="1">1 - Completamente limitado</option>
    <option value="2">2 - Muito limitado</option>
    <option value="3">3 - Ligeiramente limitado</option>
    <option value="4">4 - Nenhuma limita√ß√£o</option>
  </select>

  <label>Exposi√ß√£o √† umidade:</label>
  <select name="umidade" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="1">1 - Constantemente √∫mido</option>
    <option value="2">2 - Muito √∫mido</option>
    <option value="3">3 - Ocasionalmente √∫mido</option>
    <option value="4">4 - Raramente √∫mido</option>
  </select>

  <label>Atividade:</label>
  <select name="atividade" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="1">1 - Acamado</option>
    <option value="2">2 - Confinado √† cadeira</option>
    <option value="3">3 - Anda ocasionalmente</option>
    <option value="4">4 - Anda frequentemente</option>
  </select>

  <label>Mobilidade:</label>
  <select name="mobilidade" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="1">1 - Completamente im√≥vel</option>
    <option value="2">2 - Muito limitado</option>
    <option value="3">3 - Ligeiramente limitado</option>
    <option value="4">4 - Totalmente m√≥vel</option>
  </select>

  <label>Nutri√ß√£o:</label>
  <select name="nutricao" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="1">1 - Muito pobre</option>
    <option value="2">2 - Provavelmente inadequada</option>
    <option value="3">3 - Adequada</option>
    <option value="4">4 - Excelente</option>
  </select>

  <label>Fric√ß√£o e cisalhamento:</label>
  <select name="friccao" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="1">1 - Problema presente</option>
    <option value="2">2 - Problema potencial</option>
    <option value="3">3 - Nenhum problema aparente</option>
  </select>

  <label>Pontua√ß√£o Total (Braden):</label>
  <input type="number" id="pontuacaoBraden" name="pontuacaoBraden" readonly>

  <p id="interpretacaoBraden"></p>
  <input type="hidden" id="interpretacaoBradenInput" name="interpretacaoBraden">

  <button type="button" onclick="calcularBraden()">Calcular Braden</button>

</fieldset>

<fieldset>
  <legend><h4>Escala de Morse - Avalia√ß√£o do Risco de Queda</h4></legend>

  <label>Hist√≥rico de quedas:</label>
  <select name="historicoQueda" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="25">Sim</option>
    <option value="0">N√£o</option>
  </select>

  <label>Diagn√≥stico secund√°rio:</label>
  <select name="diagnosticoSecundario" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="15">Sim</option>
    <option value="0">N√£o</option>
  </select>

  <label>Aux√≠lio √† deambula√ß√£o:</label>
  <select name="auxilioDeambulacao" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="0">Sem aux√≠lio</option>
    <option value="15">Bengala/Muletas/Aux√≠lio</option>
    <option value="30">Uso de mobili√°rio</option>
  </select>

  <label>Terapia intravenosa/heparina lock:</label>
  <select name="terapiaIV" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="20">Sim</option>
    <option value="0">N√£o</option>
  </select>

  <label>Marcha:</label>
  <select name="marcha" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="0">Normal</option>
    <option value="10">Fraca</option>
    <option value="20">Comprometida</option>
  </select>

  <label>Estado mental:</label>
  <select name="estadoMental" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="15">Esquece limita√ß√µes</option>
    <option value="0">Orientado</option>
  </select>

  <label>Pontua√ß√£o Total (Morse):</label>
  <input type="number" id="pontuacaoMorse" name="pontuacaoMorse" readonly>

  <p id="interpretacaoMorse"></p>
  <input type="hidden" id="interpretacaoMorseInput" name="interpretacaoMorse">

  <button type="button" onclick="calcularMorse()">Calcular Risco de Queda</button>


</fieldset>

        <label>Respons√°vel (Nome e Coren):</label>
        <input type="text" name="responsavel" required>

        <button type="button" class="enviar" onclick="enviarAdmissao()">Enviar</button>
      </form>
      <p id="msgAdmissao"></p>
</div>

<!-- CARD ANOTA√á√ÉO DE ENFERMAGEM - T√âCNICO EM ENFERMAGEM - N√ÉO ALTERAR MAIS -->
    <div class="card" id="anotacaoCard">
  <h2>Formul√°rio de Anota√ß√£o de Enfermagem - T√©cnico em Enfermagem (Home Care)</h2>
  
  <form id="formAnotacao">
    <label>Data do registro no sistema Gest-Care:</label>
    <input type="date" name="data" required>

    <label for="selectPaciente">Selecione o paciente:</label>
    <select id="selectPaciente" required>
      <option value="">-- Selecione um paciente --</option>
    </select>

    <div id="dadosPacienteAnotacao" style="display: none; margin-top: 20px;">
  <!-- Campos ocultos para envio -->
  <input type="hidden" id="campoNomePacienteAnotacao" name="nomePaciente">
  <input type="hidden" id="campoNomeIdAnotacao" name="nomeId">
  <input type="hidden" id="campoNascimentoAnotacao" name="dataNascimento">

  <!-- Exibi√ß√£o visual para confirma√ß√£o -->
  <div style="border: 2px solid #cce5ff; background-color: #e6f2ff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
    <h3 style="color: #004085; margin-top: 0; display: flex; align-items: center;">
      <span style="font-size: 1.5em; margin-right: 10px;">‚úÖ</span> Confirma√ß√£o do Paciente Selecionado
    </h3>
<br>
    <label style="font-weight: bold;">Nome do Paciente:</label>
    <input type="text" id="exibeNomePaciente" readonly style="width: 100%; padding: 10px; font-size: 1.1em; margin-top: 5px; border: 1px solid #b8daff; border-radius: 5px; background-color: #ffffff;">
  </div>
</div>

<br>
    <fieldset>
      <label for="ID_CUIDADOR">Nome do Cuidador:</label>
      <input type="text" id="ID_CUIDADOR" name="ID_CUIDADOR" placeholder="Nome completo do cuidador" required>

      <label for="ID_FAMILIAR">Familiar Respons√°vel:</label>
      <input type="text" id="ID_FAMILIAR" name="ID_FAMILIAR" placeholder="Nome completo do familiar">
    </fieldset>

    <fieldset>
      <legend><h4>Condi√ß√µes do Ambiente e Dispositivos</h4></legend>
      <label for="COND_AMBIENTE">Condi√ß√µes do Ambiente:</label>
      <textarea id="COND_AMBIENTE" name="COND_AMBIENTE" rows="3" placeholder="Ex.: Limpo, organizado, ilumina√ß√£o adequada..."></textarea>

      <label for="DISPOSITIVOS">Dispositivos em uso (especificar):</label>
      <textarea id="DISPOSITIVOS" name="DISPOSITIVOS" rows="3" placeholder="Ex.: Sonda vesical, cateter, GTT..."></textarea>
    </fieldset>

    <fieldset>
      <legend><h4>Sinais Vitais</h4></legend>
      <label for="TAX">Temperatura Corporal (¬∞C):</label>
      <input type="number" id="TAX" name="TAX" min="34" max="42" step="0.1" placeholder="Ex.: 36.5">

      <label for="PAS">Press√£o Arterial Sist√≥lica (mmHg):</label>
      <input type="number" id="PAS" name="PAS" placeholder="Ex.: 120">

      <label for="PAD">Press√£o Arterial Diast√≥lica (mmHg):</label>
      <input type="number" id="PAD" name="PAD" placeholder="Ex.: 80">

      <label for="PULSO">Frequ√™ncia Card√≠aca (bpm):</label>
      <input type="number" id="PULSO" name="PULSO" min="40" max="180" placeholder="Ex.: 75">

      <label for="SPO2">Satura√ß√£o de Oxig√™nio (SpO2 %):</label>
      <input type="number" id="SPO2" name="SPO2" min="0" max="100" placeholder="Ex.: 98">

      <label for="CLASSDOR">Grau da Dor:</label>
      <select id="CLASSDOR" name="CLASSDOR">
        <option value="" disabled selected>Selecione...</option>
        <option value="Sem dor">Sem dor</option>
        <option value="Dor leve">Dor leve</option>
        <option value="Dor moderada">Dor moderada</option>
        <option value="Dor intensa">Dor intensa</option>
      </select>
    </fieldset>

    <fieldset>
      <legend><h4>Anota√ß√µes Cl√≠nicas</h4></legend>

      <label for="AVALIACAO_GLOBAL">Avalia√ß√£o Global do Paciente:</label>
      <textarea id="AVALIACAO_GLOBAL" name="AVALIACAO_GLOBAL" rows="3" placeholder="Observa√ß√µes gerais sobre estado do paciente..."></textarea>

      <label for="PRESC_MED">Prescri√ß√£o M√©dica Cumprida:</label>
      <textarea id="PRESC_MED" name="PRESC_MED" rows="3" placeholder="Medica√ß√µes, procedimentos realizados..."></textarea>

      <label for="PRESC_ENF">Prescri√ß√£o de Enfermagem Cumprida:</label>
      <textarea id="PRESC_ENF" name="PRESC_ENF" rows="3" placeholder="Cuidados de enfermagem realizados..."></textarea>

      <label for="SEGURANCA_PACIENTE">Medidas de Seguran√ßa Adotadas:</label>
      <textarea id="SEGURANCA_PACIENTE" name="SEGURANCA_PACIENTE" rows="3" placeholder="Ex.: Sinaliza√ß√£o, fixa√ß√£o de dispositivos..."></textarea>

      <label for="INTERCORRENCIAS">Intercorr√™ncias:</label>
      <textarea id="INTERCORRENCIAS" name="INTERCORRENCIAS" rows="3" placeholder="Fatos ocorridos e medidas adotadas..."></textarea>

      <label for="CONDUTAS">Condutas Realizadas:</label>
      <textarea id="CONDUTAS" name="CONDUTAS" rows="3" placeholder="A√ß√µes executadas ap√≥s intercorr√™ncias ou observa√ß√µes..."></textarea>


    </fieldset>

    <label>Respons√°vel (Nome e Coren):</label>
    <input type="text" name="RESPONSAVEL" required>

    <button type="button" class="enviar" onclick="enviarAnotacao()">Enviar</button>
  </form>
  <p id="msgAnotacao"></p>
</div>

<!-- CARD CONSULTA DE ENFERMAGEM - N√ÉO ALTERAR MAIS-->
<div class="card" id="consultaCard">
      <h2>Formul√°rio de Consulta para Aten√ß√£o Domiciliar √† Sa√∫de - Enfermagem - presencial/tel√™nfermagem</h2>
      <p> Instrumento adaptado. Refer√™ncia: Caderno de Aten√ß√£o Domiciliar √† Sa√∫de do Minist√©rio da Sa√∫de do Brasil. (2013)</p>
      <form id="formConsulta">
        <label>Data:</label>
        <input type="date" name="data" required>
        <fieldset>
            	<legend><h4>Identifica√ß√£o do Paciente</h4></legend>

            <label for="selectPacienteConsulta">Selecione o paciente:</label>
    <select id="selectPacienteConsulta" required>
      <option value="">-- Selecione um paciente --</option>
    </select>

    <div id="dadosPacienteConsulta" style="display: none; margin-top: 20px;">
  <!-- Campos ocultos para envio -->
  <input type="hidden" id="campoNomePacienteConsulta" name="nomePaciente">
  <input type="hidden" id="campoNomeIdConsulta" name="nomeId">
  <input type="hidden" id="campoNascimentoConsulta" name="dataNascimento">

  <!-- Exibi√ß√£o visual para confirma√ß√£o -->
  <div style="border: 2px solid #cce5ff; background-color: #e6f2ff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
    <h3 style="color: #004085; margin-top: 0; display: flex; align-items: center;">
      <span style="font-size: 1.5em; margin-right: 10px;">‚úÖ</span> Confirma√ß√£o do Paciente Selecionado
    </h3>
<br>
    <label style="font-weight: bold;">Nome do Paciente:</label>
    <input type="text" id="exibeNomePaciente" readonly style="width: 100%; padding: 10px; font-size: 1.1em; margin-top: 5px; border: 1px solid #b8daff; border-radius: 5px; background-color: #ffffff;">
  </div>
</div>

<br>

              <label for="AGE">Idade:</label>
            	<input type="number" id="AGE" name="AGE" placeholder="Apenas n√∫meros" required>
            	
              <label for="SEX">Sexo:</label>
            	<select id="SEX" name="SEX" required>
                	<option value="" disabled selected>Selecione...</option>
                	<option value="Masculino">Masculino</option>
                	<option value="Feminino">Feminino</option>
            	</select>
            	<label for="QUADRO">Quadro Cl√≠nico:</label>
            	<textarea id="QUADRO" name="QUADRO" rows="4" placeholder="Descreva o quadro cl√≠nico..." required></textarea>
        	</fieldset>

          <fieldset>
    	    <legend><h4>Avalia√ß√£o da Pele e Tecidos</h4></legend>
        	<label for="PELE">Estado Tegumentar:</label>
        	<select id="PELE" name="PELE" onchange="toggleCustomTextArea(this)" required>
            	<option value="" disabled selected>Selecione...</option>
            	<option value="Pele √≠ntegra e saud√°vel">Pele √≠ntegra e saud√°vel</option>
            	<option value="Outro">Outro (especifique)</option>
        	</select>
        	<!-- Campo Personalizado -->
        	<textarea id="PELE_OPCAO_PERSONALIZADA" name="PELE_OPCAO_PERSONALIZADA" rows="3"
                  	placeholder="Descreva o estado da pele..."
                  	style="display:none;"></textarea>
        	<!-- Colora√ß√£o da Pele -->
            	<label for="COR">Colora√ß√£o da Pele:</label>
          <select id="COR" name="COR" required>
              <option value="" disabled selected>Selecione...</option>
              <option value="Normocorada">Normocorada</option>
                <option value="Cianose discreta">Cianose discreta</option>
    <option value="Cianose evidente">Cianose evidente</option>
    <option value="Eritematoso">Eritematoso</option>
</select>
        	<!-- Edema -->
            	<label for="EDEMA">Edema:</label>
          <select id="EDEMA" name="EDEMA" required>
              <option value="" disabled selected>Selecione...</option>
              <option value="Ausente">Ausente</option>
              <option value="1+">Cacifo 1+</option>
              <option value="2+">Cacifo 2++</option>
              <option value="3+">Cacifo 3+++</option>
              <option value="4+">Cacifo 4++++</option>
</select>
        	<!-- Hidrata√ß√£o da Pele -->
            	<label for="HIDRAT">Hidrata√ß√£o da Pele:</label>
<select id="HIDRAT" name="HIDRAT" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Hidratada">Hidratada</option>
    <option value="Moderada">Moderada</option>
    <option value="Desidratada">Desidratada</option>
</select>
          <!-- Grau de Higiene Corporal -->
            	<label for="HIGIE">Grau de Higiene Corporal:</label>
<select id="HIGIE" name="HIGIE" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Adequada">Adequada</option>
    <option value="Inadequada">Inadequada</option>
</select>
        	<!-- Presen√ßa de √Årea Vermelha ou Ponto de Press√£o -->
            	<label for="LPP">Presen√ßa de √Årea Vermelha ou Ponto de Press√£o:</label>
<select id="LPP" name="LPP" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Presente">Presente</option>
    <option value="Ausente">Ausente</option>
</select>
        	<!-- Les√£o por Press√£o (LPP) -->
            	<label for="LPP2">Les√£o por Press√£o (LPP):</label>
<select id="LPP2" name="LPP2" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Ausente">Ausente</option>
    <option value="Est√°gio I">Est√°gio I</option>
    <option value="Est√°gio II">Est√°gio II</option>
    <option value="Est√°gio III">Est√°gio III</option>
    <option value="Est√°gio IV">Est√°gio IV</option>
</select>
	    </fieldset>

      <fieldset>
    <legend><h4>Entrada de Sinais Vitais</h4></legend>

    <label for="TAX">Temperatura Corporal (¬∞C):</label>
    <input type="number" id="TAX" name="TAX" min="34" max="42" step="0.1" placeholder="Ex.: 36.5" required>

    <label for="PAS">Press√£o Arterial Sist√≥lica (mmHg):</label>
    <input type="number" id="PAS" name="PAS" placeholder="Ex.: 120" required>

    <label for="PAD">Press√£o Arterial Diast√≥lica (mmHg):</label>
    <input type="number" id="PAD" name="PAD" placeholder="Ex.: 80" required>

    <label for="PULSO">Frequ√™ncia Card√≠aca (bpm):</label>
    <input type="number" id="PULSO" name="PULSO" min="40" max="180" placeholder="Ex.: 75" required>

    <label for="SPO2">Satura√ß√£o de Oxig√™nio (SpO2 %):</label>
    <input type="number" id="SPO2" name="SPO2" min="0" max="100" placeholder="Ex.: 98" required>

    </fieldset>

    <fieldset>
    <legend><h4>Classifica√ß√£o dos Sinais Vitais</h4></legend>

    <label for="CLASSDOR">Grau da Dor:</label>
    <select id="CLASSDOR" name="CLASSDOR" required>
        <option value="" disabled selected>Selecione...</option>
        <option value="Sem dor">Sem dor</option>
        <option value="Dor leve">Dor leve</option>
        <option value="Dor moderada">Dor moderada</option>
        <option value="Dor intensa">Dor intensa</option>
    </select>

    <label for="CLASSTAX">Temperatura Axilar:</label>
    <select id="CLASSTAX" name="CLASSTAX" required>
        <option value="" disabled selected>Selecione...</option>
        <option value="Normotermia">Normotermia</option>
        <option value="Febril">Febril</option>
        <option value="Febre">Febre</option>
        <option value="Hipotermia">Hipotermia</option>
        <option value="Hipertermia">Hipertermia</option>
    </select>

    <label for="CLASSPA">Press√£o Arterial Sist√™mica:</label>
    <select id="CLASSPA" name="CLASSPA" required>
        <option value="" disabled selected>Selecione...</option>
        <option value="Normotens√£o">Normotens√£o</option>
        <option value="Hipotens√£o">Hipotens√£o</option>
        <option value="Hipertens√£o Est√°gio I">Hipertens√£o Est√°gio I</option>
        <option value="Hipertens√£o Est√°gio II">Hipertens√£o Est√°gio II</option>
        <option value="Crise Hipertensiva">Crise Hipertensiva</option>
    </select>

    <label for="CLASSPO2">Classifica√ß√£o da Satura√ß√£o:</label>
<select id="CLASSPO2" name="CLASSPO2" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Normal">Normal (‚â• 95%)</option>
    <option value="Leve Hipoxemia">Leve Hipoxemia (90-94%)</option>
    <option value="Moderada Hipoxemia">Moderada Hipoxemia (85-89%)</option>
    <option value="Grave Hipoxemia">Grave Hipoxemia (< 85%)</option>
</select>
</fieldset>

<fieldset>
  <legend><h4>Padr√£o de sono e vig√≠lia</h4></legend>
  <label for="SONO">Padr√£o de Sono:</label>
<select id="SONO" name="SONO" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Sono Profundo e Restaurador">Sono Profundo e Restaurador</option>
    <option value="Sono Agitado, Observa√ß√£o de Apneia ou Ronco">Sono Agitado, Observa√ß√£o de Apneia ou Ronco</option>
    <option value="Despertares Frequentes/Sono Fragmentado">Despertares Frequentes/Sono Fragmentado</option>
    <option value="Dificuldade para Iniciar o Sono">Dificuldade para Iniciar o Sono</option>
</select>
</fieldset>

<fieldset>
  <!-- Padr√£o de Alimenta√ß√£o e Nutri√ß√£o -->
   <legend><h4>Padr√£o de Alimenta√ß√£o e Nutri√ß√£o</h4></legend>
<label for="VIAALIMENT">Via de alimenta√ß√£o:</label>
<select id="VIAALIMENT" name="VIAALIMENT" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Via oral">Via oral</option>
    <option value="Ingest√£o pastosa">Ingest√£o pastosa</option>
    <option value="Ingest√£o l√≠quida">Ingest√£o l√≠quida</option>
    <option value="Interrompido">Interrompido</option>
    <option value="Gastrostomia">Gastrostomia</option>
    <option value="Sonda SNE/SNE">Sonda SNE/SNE</option>
</select>

<label for="INFOALIMENT">Descreva o cen√°rio relacionado √† alimenta√ß√£o, informe aceita√ß√£o e/ou recusa, entre outros:</label>
<textarea id="INFOALIMENT" name="INFOALIMENT" rows="4" placeholder="Descreva..." oninput="updateFormData('INFOALIMENT', this.value)"></textarea>

<label for="ALIMENT">Aceitabilidade da Dieta:</label>
<select id="ALIMENT" name="ALIMENT" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Aceita bem">Aceita bem</option>
    <option value="Aceita parcialmente">Aceita parcialmente</option>
    <option value="Recusa">Recusa</option>
</select>
</fieldset>

<fieldset>
   <legend><h4>Padr√£o de Mobilidade</h4></legend>
    <label for="MOBI">Estado de mobilidade atual do paciente:</label>
<select id="MOBI" name="MOBI" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Ativa">Ativa</option>
    <option value="Diminu√≠da">Diminu√≠da</option>
    <option value="Passiva com aux√≠lio">Passiva com aux√≠lio</option>
</select>

<label for="OBSMOBI">Observa√ß√µes sobre a mobilidade do paciente:</label>
<textarea id="OBSMOBI" name="OBSMOBI" rows="4" placeholder="Acrescente observa√ß√µes relevantes sobre a mobilidade do paciente..."></textarea>

<label for="MOBILEITO">Mobilidade no leito:</label>
<select id="MOBILEITO" name="MOBILEITO" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Com assist√™ncia">Com assist√™ncia</option>
    <option value="Levantamento sem aux√≠lio">Levantamento sem aux√≠lio</option>
    <option value="Restrito ao leito">Restrito ao leito</option>
</select>

<label for="OBSMOBILEITO">Observa√ß√µes sobre Mobilidade no Leito:</label>
<textarea id="OBSMOBILEITO" name="OBSMOBILEITO" rows="4" placeholder="Acrescente observa√ß√µes sobre a mobilidade no leito..."></textarea>

<label for="MOBIFORALEITO">Mobilidade fora do leito:</label>
<select id="MOBIFORALEITO" name="MOBIFORALEITO" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Restrito ao leito">Restrito ao leito</option>
    <option value="Com assist√™ncia">Com assist√™ncia</option>
    <option value="Independente">Independente</option>
</select>

<label for="OBSMOBIFORALEITO">Observa√ß√µes sobre Mobilidade fora do Leito:</label>
<textarea id="OBSMOBIFORALEITO" name="OBSMOBIFORALEITO" rows="4" placeholder="Acrescente observa√ß√µes sobre a mobilidade fora do leito..."></textarea>
</fieldset>

<fieldset>
  <legend><h4>Padr√£o de Higiene</h4></legend>
  <label for="GRAUHIGIE">Qual √© o grau de higiene corporal do paciente?</label>
<select id="GRAUHIGIE" name="GRAUHIGIE" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Adequada">Adequada</option>
    <option value="Inadequada">Inadequada</option>
</select>

<label for="OBSHIGIE">Observa√ß√µes sobre a higiene corporal do paciente:</label>
<textarea id="OBSHIGIE" name="OBSHIGIE" rows="4" placeholder="Acrescente observa√ß√µes relevantes sobre a higiene do paciente..."></textarea>

<label for="HIGIEORAL">Higiene Oral:</label>
<select id="HIGIEORAL" name="HIGIEORAL" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Adequada">Adequada</option>
    <option value="Inadequada">Inadequada</option>
</select>

<label for="OBSHIGIEORAL">Observa√ß√µes sobre Higiene Oral:</label>
<textarea id="OBSHIGIEORAL" name="OBSHIGIEORAL" rows="4" placeholder="Acrescente observa√ß√µes sobre a higiene oral do paciente..."></textarea>

<label for="HIGIELEITO">Higiene do Leito:</label>
<select id="HIGIELEITO" name="HIGIELEITO" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Adequada">Adequada</option>
    <option value="Inadequada">Inadequada</option>
</select>

<label for="OBSHIGIELEITO">Observa√ß√µes sobre Higiene do Leito:</label>
<textarea id="OBSHIGIELEITO" name="OBSHIGIELEITO" rows="4" placeholder="Acrescente observa√ß√µes sobre a higiene do leito..."></textarea>
</fieldset>

<fieldset>
  <legend><h4>Sondas e Dispositivos (TQT, VM, Bomba de Infus√£o)</h4></legend>

  <label for="FOLEY">Sonda Vesical (Foley):</label>
  <select id="FOLEY" name="FOLEY" onchange="updateSondaStatus('FOLEY')">
    <option value="" disabled selected>Selecione...</option>
    <option value="Presente">Presente</option>
    <option value="Ausente">Ausente</option>
  </select>
  <input type="text" id="FOLEY_STATUS" name="FOLEY_STATUS" placeholder="Ex.: Funcional, obstru√≠da..." disabled>
  <label for="FOLEY_TROCA">Troca Realizada?</label>
  <select id="FOLEY_TROCA" name="FOLEY_TROCA">
    <option value="" disabled selected>Selecione...</option>
    <option value="Sim">Sim</option>
    <option value="N√£o">N√£o</option>
  </select>

  <label for="CISTOSTOMIA">Cistostomia:</label>
  <select id="CISTOSTOMIA" name="CISTOSTOMIA" onchange="updateSondaStatus('CISTOSTOMIA')">
    <option value="" disabled selected>Selecione...</option>
    <option value="Presente">Presente</option>
    <option value="Ausente">Ausente</option>
  </select>
  <input type="text" id="CISTOSTOMIA_STATUS" name="CISTOSTOMIA_STATUS" placeholder="Ex.: Boa fixa√ß√£o, secre√ß√£o..." disabled>
  <label for="CISTOSTOMIA_TROCA">Troca Realizada?</label>
  <select id="CISTOSTOMIA_TROCA">
    <option value="" disabled selected>Selecione...</option>
    <option value="Sim">Sim</option>
    <option value="N√£o">N√£o</option>
  </select>

  <label for="ILEOCOLO">Ileostomia / Colostomia:</label>
  <select id="ILEOCOLO" name="ILEOCOLO" onchange="updateSondaStatus('ILEOCOLO')">
    <option value="" disabled selected>Selecione...</option>
    <option value="Presente">Presente</option>
    <option value="Ausente">Ausente</option>
  </select>
  <input type="text" id="ILEOCOLO_STATUS" name="ILEOCOLO_STATUS" placeholder="Ex.: Pele √≠ntegra, les√£o perilesional..." disabled>
  <label for="ILEOCOLO_TROCA">Troca Realizada?</label>
  <select id="ILEOCOLO_TROCA" name="ILEOCOLO_TROCA">
    <option value="" disabled selected>Selecione...</option>
    <option value="Sim">Sim</option>
    <option value="N√£o">N√£o</option>
  </select>

  <label for="TRAQUEO">Traqueostomia:</label>
  <select id="TRAQUEO" name="TRAQUEO" onchange="updateSondaStatus('TRAQUEO')">
    <option value="" disabled selected>Selecione...</option>
    <option value="Presente">Presente</option>
    <option value="Ausente">Ausente</option>
  </select>
  <input type="text" id="TRAQUEO_STATUS" name="TRAQUEO_STATUS" placeholder="Ex.: Hidrata√ß√£o adequada, secre√ß√£o presente..." disabled>
  <label for="TRAQUEO_TROCA">Troca Realizada?</label>
  <select id="TRAQUEO_TROCA" name="TRAQUEO_TROCA">
    <option value="" disabled selected>Selecione...</option>
    <option value="Sim">Sim</option>
    <option value="N√£o">N√£o</option>
  </select>

  <label for="VM">Ventila√ß√£o Mec√¢nica:</label>
  <select id="VM" name="VM" onchange="updateSondaStatus('VM')">
    <option value="" disabled selected>Selecione...</option>
    <option value="Presente">Presente</option>
    <option value="Ausente">Ausente</option>
  </select>
  <input type="text" id="VM_STATUS" name="VM_STATUS" placeholder="Ex.: Ventila√ß√£o efetiva, 1 litro de oxig√™nio..." disabled>
  <label for="VM_TROCA">Troca Realizada?</label>
  <select id="VM_TROCA" name="VM_TROCA">
    <option value="" disabled selected>Selecione...</option>
    <option value="Sim">Sim</option>
    <option value="N√£o">N√£o</option>
  </select>

  <label for="BOMBA">Bomba de Infus√£o:</label>
  <select id="BOMBA" name="BOMBA" onchange="updateSondaStatus('BOMBA')">
    <option value="" disabled selected>Selecione...</option>
    <option value="Presente">Presente</option>
    <option value="Ausente">Ausente</option>
  </select>
  <input type="text" id="BOMBA_STATUS" name="BOMBA_STATUS" placeholder="Ex.: Bomba funcional para alimenta√ß√£o/√°gua/medica√ß√£o..." disabled>
  <label for="BOMBA_TROCA">Troca Realizada?</label>
  <select id="BOMBA_TROCA" name="BOMBA_TROCA">
    <option value="" disabled selected>Selecione...</option>
    <option value="Sim">Sim</option>
    <option value="N√£o">N√£o</option>
  </select>

  <label for="FUNCADEQ">Observa√ß√µes gerais sobre sondas e dispositivos:</label>
  <textarea id="FUNCADEQ" name="FUNCADEQ" rows="4" placeholder="Detalhes sobre funcionalidade, trocas e intercorr√™ncias"></textarea>
</fieldset>

        <label>Respons√°vel (Nome e Coren):</label>
        <input type="text" name="RESPONSAVEL" required>

        <button type="button" class="enviar" onclick="enviarConsulta()">Enviar</button>
      </form>
      <p id="msgConsulta"></p>
</div>

<!-- CARD - Diagn√≥stico e Prescri√ß√£o de Enfermagem -->
<div class="card" id="cardDiagnostico" style="display: none;">
  <h2>Registro de Diagn√≥sticos e Prescri√ß√£o de Enfermagem</h2>
  <form id="formDiagnostico">
    <label>Data:</label>
    <input type="date" name="data" required>

    <fieldset>
    <legend><h4>Identifica√ß√£o autom√°tica do Paciente</h4></legend>
    <label for="selectPacienteDiagnostico">Selecione o paciente:</label>
    <select id="selectPacienteDiagnostico" required>
      <option value="">-- Selecione um paciente --</option>
    </select>

    <div id="dadosPacienteDiagnostico" style="display: none; margin-top: 20px;">
  <!-- Campos ocultos para envio -->
  <input type="hidden" id="campoNomePacienteDiagnostico" name="nomePaciente">
  <input type="hidden" id="campoNomeIdDiagnostico" name="nomeId">
  <input type="hidden" id="campoNascimentoDiagnostico" name="dataNascimento">
<br>

</div>
<br>
</fieldset>
<br>

  <!-- Passo 1: Selecionar Dom√≠nio -->
  <fieldset>
    <legend>1Ô∏è‚É£ Escolha o Dom√≠nio</legend>
    <label>Dom√≠nio:</label>
    <select id="dominioSelect" onchange="atualizarClasses()">
      <option value="" disabled selected>Selecione...</option>
      <!-- Op√ß√µes ser√£o carregadas via JS -->
    </select>
  </fieldset>

  <!-- Passo 2: Selecionar Classe -->
  <fieldset id="classeBox" style="display:none;">
    <legend>2Ô∏è‚É£ Escolha a Classe</legend>
    <label>Classe:</label>
    <select id="classeSelect" onchange="atualizarTitulos()">
      <option value="" disabled selected>Selecione...</option>
    </select>
  </fieldset>

  <!-- Passo 3: Selecionar Diagn√≥stico -->
  <fieldset id="diagnosticoBox" style="display:none;">
    <legend>3Ô∏è‚É£ Escolha o Diagn√≥stico</legend>
    <label>Diagn√≥stico de Enfermagem:</label>
    <select id="diagnosticoSelect">
      <option value="" disabled selected>Selecione...</option>
    </select>
  </fieldset>

  <button type="button" class="nav-button" onclick="adicionarDiagnostico()">‚ûï Adicionar Diagn√≥stico</button>

  <!-- Diagn√≥sticos Selecionados -->
  <div id="diagnosticosSalvosBox" style="display:none;">
    <fieldset>
      <legend>üìå Diagn√≥sticos Selecionados</legend>
      <div id="listaDiagnosticos"></div>
    </fieldset>
  </div>

  <!-- Respons√°vel e envio -->
  <label>Respons√°vel (Nome e Coren):</label>
  <input type="text" id="responsavelDiagnostico" required>

  <button type="button" onclick="enviarDiagnosticos()">üì§ Enviar Diagn√≥sticos</button>
</form> <!-- ‚Üê FECHAMENTO QUE FALTAVA! -->
  <p id="msgDiagnostico"></p>
</div>

<!-- CARD ENCERRAMENTO DO CUIDADO DE ENFERMAGEM-  N√ÉO ALTERAR MAIS -->
<div class="card" id="altaCard">
  <h2>Encerramento do Cuidado de Enfermagem ‚Äì Aten√ß√£o Domiciliar</h2>
  <form id="formAlta">

     <label>Data:</label>
    <input type="date" name="data" required>

    <fieldset>
    <legend><h4>Identifica√ß√£o autom√°tica do Paciente</h4></legend>
    <label for="selectPacienteAlta">Selecione o paciente:</label>
    <select id="selectPacienteAlta" required>
      <option value="">-- Selecione um paciente --</option>
    </select>

    <div id="dadosPacienteAlta" style="display: none; margin-top: 20px;">
  <!-- Campos ocultos para envio -->
  <input type="hidden" id="campoNomePacienteAlta" name="nomePaciente">
  <input type="hidden" id="campoNomeIdAlta" name="nomeId">
  <input type="hidden" id="campoNascimentoAlta" name="dataNascimento">
<br>
</div>
<br>
<br>
    <fieldset>
    <label>Data e hora do encerramento do cuidado:</label>
    <input type="datetime-local" name="dataHora" required>

    <label>Motivo da alta:</label>
<select name="motivoAlta" required>
  <option value="" disabled selected>Selecione...</option>

  <!-- Altas por conclus√£o do cuidado -->
  <option value="Alta por cuidado conclu√≠do com estabilidade cl√≠nica">Alta por cuidado conclu√≠do com estabilidade cl√≠nica</option>
  <option value="Alta ap√≥s reabilita√ß√£o funcional com sucesso">Alta ap√≥s reabilita√ß√£o funcional com sucesso</option>
  <option value="Alta por melhora significativa do quadro cl√≠nico">Alta por melhora significativa do quadro cl√≠nico</option>

  <!-- Altas por √≥bito -->
  <option value="Alta por √≥bito em domic√≠lio">Alta por √≥bito em domic√≠lio</option>
  <option value="Alta por √≥bito em unidade hospitalar">Alta por √≥bito em unidade hospitalar</option>

  <!-- Altas por decis√£o da fam√≠lia -->
  <option value="Encerramento por decis√£o familiar sem intercorr√™ncias">Encerramento por decis√£o familiar sem intercorr√™ncias</option>
  <option value="Encerramento por recusa da continuidade do servi√ßo pela fam√≠lia">Encerramento por recusa da continuidade do servi√ßo pela fam√≠lia</option>

  <!-- Encaminhamentos -->
  <option value="Encaminhado para hospital por agravamento do quadro">Encaminhado para hospital por agravamento do quadro</option>
  <option value="Encaminhado para servi√ßo de maior complexidade">Encaminhado para servi√ßo de maior complexidade</option>
  <option value="Transferido para outra institui√ß√£o de longa perman√™ncia">Transferido para outra institui√ß√£o de longa perman√™ncia</option>
  <option value="Transferido para interna√ß√£o hospitalar programada">Transferido para interna√ß√£o hospitalar programada</option>
</select>


    <label>Desfecho do cuidado de Enfermagem:</label>
    <select name="desfechoCuidado" required>
      <option value="" disabled selected>Selecione...</option>
      <option value="Cuidado conclu√≠do com estabilidade">Cuidado conclu√≠do com estabilidade</option>
      <option value="Encaminhado para servi√ßo de maior complexidade">Encaminhado para servi√ßo de maior complexidade</option>
      <option value="Interrompido por √≥bito">Interrompido por √≥bito</option>
      <option value="Encerramento por decis√£o familiar/respons√°vel">Encerramento por decis√£o familiar/respons√°vel</option>
      <option value="Encerramento administrativo">Encerramento administrativo</option>
    </select>

    <label>Proced√™ncia do paciente:</label>
  <select name="procedencia" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Domic√≠lio">Domic√≠lio</option>
    <option value="Hospital">Hospital</option>
    <option value="ILPI">ILPI (Institui√ß√£o de Longa Perman√™ncia)</option>
  </select>

    <label>Condi√ß√µes de chegada:</label>
  <select name="condicoesChegada" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Est√°vel">Est√°vel</option>
    <option value="Est√°vel com suporte">Est√°vel com suporte</option>
    <option value="Fr√°gil">Fr√°gil</option>
    <option value="Grave">Grave</option>
  </select>

    <label>N√≠vel de consci√™ncia:</label>
  <select name="nivelConsciencia" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Consciente">Consciente</option>
    <option value="Desorientado">Desorientado</option>
    <option value="Rebaixado">Rebaixado</option>
  </select>

    <label>Presen√ßa de acompanhante ou respons√°vel:</label>
    <input type="text" name="acompanhante">

    <label>Condi√ß√µes de higiene:</label>
  <select name="higiene" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Prejudicada">Prejudicada</option>
    <option value="Preservada">Preservada</option>
    <option value="Parcial">Parcial</option>
    <option value="Necessita aux√≠lio para banho e higiene √≠ntima">Necessita aux√≠lio para banho e higiene √≠ntima</option>
  </select>

    <label>Presen√ßa de les√µes pr√©vias e localiza√ß√£o:</label>
    <textarea name="lesoes"></textarea>

    <label>Defici√™ncias (se houver):</label>
  <select name="deficiencias" required>
    <option value="" disabled selected>Selecione...</option>
    <option value="Cognitiva">Cognitiva</option>
    <option value="Motora">Motora</option>
    <option value="Sensorial">Sensorial</option>
    <option value="N√£o">N√£o</option>
  </select>

    <label>Uso de pr√≥teses ou √≥rteses:</label>
    <textarea name="protese"></textarea>

    <label>Queixas principais durante o cuidado:</label>
    <textarea name="queixas"></textarea>

    <label>Procedimentos/cuidados realizados durante o acompanhamento:</label>
    <textarea name="procedimentos"></textarea>

    <label>Orienta√ß√µes finais prestadas ao cuidador/familiar:</label>
    <textarea name="orientacoes"></textarea>

    <label>Houve hospitaliza√ß√£o durante o per√≠odo do cuidado?</label>
    <select name="houveHospitalizacao" required>
      <option value="" disabled selected>Selecione...</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
    </select>

    <label>A hospitaliza√ß√£o foi considerada evit√°vel?</label>
    <select name="hospitalizacaoEvitavel">
      <option value="" disabled selected>Selecione...</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
    </select>
    </fieldset>
    <label>Respons√°vel pelo encerramento do cuidado (Nome e Coren):</label>
    <input type="text" name="responsavel" required>

    <button type="button" class="enviar" onclick="enviarAlta()">Enviar</button>
  </form>
  <p id="msgAlta"></p>
</div>

<!-- CARD INTERCORR√äNCIAS - N√ÉO ALTERAR MAIS -->
<div class="card" id="intercorrenciaCard">
  <h2>Registro de Intercorr√™ncias Cl√≠nicas para Aten√ß√£o Domiciliar √† Sa√∫de</h2>
  <p>Instrumento elaborado com recurso de intelig√™ncia artigical generativa.</p>
  <form id="formIntercorrencia">
    <label>Data da intercorr√™ncia:</label>
    <input type="date" name="data" required>

    <fieldset>
    <legend><h4>Identifica√ß√£o autom√°tica do Paciente</h4></legend>
    <label for="selectPacienteIntercorrencia">Selecione o paciente:</label>
    <select id="selectPacienteIntercorrencia" required>
      <option value="">-- Selecione um paciente --</option>
    </select>

    <div id="dadosPacienteIntercorrencia" style="display: none; margin-top: 20px;">
  <!-- Campos ocultos para envio -->
  <input type="hidden" id="campoNomePacienteIntercorrencia" name="nomePaciente">
  <input type="hidden" id="campoNomeIdIntercorrencia" name="nomeId">
  <input type="hidden" id="campoNascimentoIntercorrencia" name="dataNascimento">
<br>
</div>
<br>
<br>

    <label>Tipo de intercorr√™ncia:</label>
    <select name="tipoIntercorrencia" required>
      <option value="" disabled selected>Selecione...</option>
      <option value="Evento Adverso">Evento Adverso (houve dano ao paciente)</option>
      <option value="Incidente">Incidente (n√£o houve dano, mas poderia ter causado)</option>
      <option value="Quase-incidente">Quase-incidente (n√£o ocorreu, mas havia potencial)</option>
    </select>

    <label>Gravidade da intercorr√™ncia:</label>
    <select name="gravidadeIntercorrencia" required>
      <option value="" disabled selected>Selecione...</option>
      <option value="Leve">Leve</option>
      <option value="Moderada">Moderada</option>
      <option value="Grave">Grave</option>
    </select>

    <label>Categoria da intercorr√™ncia:</label>
    <select name="categoriaIntercorrencia" onchange="toggleOutroCategoria(this)">
      <option value="" disabled selected>Selecione...</option>
      <option value="Medicamentos">Medicamentos</option>
      <option value="Dispositivos">Dispositivos</option>
      <option value="Queda">Queda</option>
      <option value="Infec√ß√£o">Infec√ß√£o</option>
      <option value="Les√£o por Press√£o">Les√£o por Press√£o</option>
      <option value="Outro">Outro</option>
    </select>

    <div id="campoOutroCategoria" style="display: none;">
      <label>Descreva a outra categoria:</label>
      <input type="text" name="categoriaOutro">
    </div>

    <label>Local onde ocorreu a intercorr√™ncia:</label>
    <input type="text" name="localIntercorrencia" placeholder="Ex: Quarto, Banheiro, Sala etc.">

    <label>Profissional presente no momento (se houver):</label>
    <input type="text" name="profissionalPresente" placeholder="Nome e fun√ß√£o">

    <label>Descri√ß√£o detalhada da intercorr√™ncia:</label>
    <textarea name="descricao" rows="4" required></textarea>

    <label>Consequ√™ncias/danos ao paciente:</label>
    <textarea name="consequencias" rows="3"></textarea>

    <label>Causa prov√°vel:</label>
    <textarea name="causaProvavel" rows="3"></textarea>

    <label>A√ß√µes imediatas adotadas:</label>
    <textarea name="acoesImediatas" rows="3"></textarea>

    <label>Foi realizada notifica√ß√£o formal?</label>
    <select name="notificacaoFormal" onchange="toggleNotificacaoDetalhada(this)">
      <option value="" disabled selected>Selecione...</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
    </select>

    <div id="campoDetalheNotificacao" style="display: none;">
      <label>Detalhe a notifica√ß√£o (local, protocolo etc.):</label>
      <textarea name="detalheNotificacao" rows="2"></textarea>
    </div>

    <label>Tempo entre ocorr√™ncia e atendimento (em minutos):</label>
    <input type="number" name="tempoResposta" min="0">

    <label>Servi√ßo de urg√™ncia acionado:</label>
    <select name="servicoUrgencia">
      <option value="" disabled selected>Selecione...</option>
      <option value="SAMU">SAMU</option>
      <option value="UPA">UPA</option>
      <option value="Ambul√¢ncia privada">Ambul√¢ncia privada</option>
      <option value="N√£o foi necess√°rio">N√£o foi necess√°rio</option>
    </select>

    <label>Orienta√ß√µes prestadas ao paciente/fam√≠lia:</label>
    <textarea name="orientacoes" rows="3"></textarea>

    <label>Paciente/fam√≠lia orientado(a) sobre sinais de alerta?</label>
    <select name="orientacaoAlerta">
      <option value="" disabled selected>Selecione...</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
    </select>

    <label>Houve Hospitaliza√ß√£o durante atendimento?</label>
    <select name="houveHospitalizacao" required>
      <option value="" disabled selected>Selecione...</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
    </select>

    <label>Considerada hospitaliza√ß√£o evit√°vel?</label>
    <select name="hospitalizacaoEvitavel">
      <option value="" disabled selected>Selecione...</option>
      <option value="Sim">Sim</option>
      <option value="N√£o">N√£o</option>
    </select>

    <label>Desfecho imediato da intercorr√™ncia:</label>
    <select name="desfecho">
      <option value="" disabled selected>Selecione...</option>
      <option value="Paciente estabilizado no domic√≠lio">Paciente estabilizado no domic√≠lio</option>
      <option value="Encaminhado ao hospital">Encaminhado ao hospital</option>
      <option value="Encaminhado √† UBS">Encaminhado √† UBS</option>
      <option value="√ìbito no domic√≠lio">√ìbito no domic√≠lio</option>
    </select>

    <label>Respons√°vel pelo registro (Nome e Coren):</label>
    <input type="text" name="responsavel" required>

    <button type="button" class="enviar" onclick="enviarIntercorrencia()">Enviar</button>
  </form>
  <p id="msgIntercorrencia"></p>
</div>

</div>

<script>
  
const equipes = {
  "Equipe Florence": {
    enfermeiros: ["Enf 1"],
    tecnicos: ["T√©c 1", "T√©c 2", "T√©c 3"]
  },
  "Equipe Horta": {
    enfermeiros: ["Enf 2"],
    tecnicos: ["T√©c 4", "T√©c 5", "T√©c 6"]
  },
  "Equipe Nery": {
    enfermeiros: ["Enf 3"],
    tecnicos: ["T√©c 7", "T√©c 8", "T√©c 9"]
  },
  "Equipe Peplau": {
    enfermeiros: ["Enf 4"],
    tecnicos: ["T√©c 10", "T√©c 11", "T√©c 12"]
  }
};

let equipeResponsavel = ""; // vari√°vel global

function atualizarEquipe() {
  const equipeSelecionada = document.getElementById("selectEquipe").value;
  equipeResponsavel = equipeSelecionada; // ‚úÖ agora armazenando o valor

  const enfSelect = document.getElementById("enfermeiroResponsavel");
  const tecSelect = document.getElementById("tecnicosResponsaveis");

  // Limpa os campos
  enfSelect.innerHTML = '<option value="">Selecione...</option>';
  tecSelect.innerHTML = '';

  if (!equipeSelecionada || !equipes[equipeSelecionada]) return;

  // Preenche enfermeiros
  equipes[equipeSelecionada].enfermeiros.forEach(enf => {
    const option = document.createElement("option");
    option.value = enf;
    option.textContent = enf;
    enfSelect.appendChild(option);
  });

  // Preenche t√©cnicos
  equipes[equipeSelecionada].tecnicos.forEach(tec => {
    const option = document.createElement("option");
    option.value = tec;
    option.textContent = tec;
    tecSelect.appendChild(option);
  });
}

const matriculas = {
  // Gestor
  "0000": { perfil: "gestor" },

  // Assistencialistas (Enfermeiros)
  "1111": { perfil: "assistencialista", equipe: "Equipe Florence" },
  "1112": { perfil: "assistencialista", equipe: "Equipe Horta" },
  "1113": { perfil: "assistencialista", equipe: "Equipe Nery" },
  "1114": { perfil: "assistencialista", equipe: "Equipe Peplau" },

  // T√©cnicos - Florence
  "2221": { perfil: "tecnico", equipe: "Equipe Florence" },
  "2222": { perfil: "tecnico", equipe: "Equipe Florence" },
  "2223": { perfil: "tecnico", equipe: "Equipe Florence" },

  // T√©cnicos - Horta
  "2231": { perfil: "tecnico", equipe: "Equipe Horta" },
  "2232": { perfil: "tecnico", equipe: "Equipe Horta" },
  "2233": { perfil: "tecnico", equipe: "Equipe Horta" },

  // T√©cnicos - Nery
  "2241": { perfil: "tecnico", equipe: "Equipe Nery" },
  "2242": { perfil: "tecnico", equipe: "Equipe Nery" },
  "2243": { perfil: "tecnico", equipe: "Equipe Nery" },

  // T√©cnicos - Peplau 
  "2251": { perfil: "tecnico", equipe: "Equipe Peplau" },
  "2252": { perfil: "tecnico", equipe: "Equipe Peplau" },
  "2253": { perfil: "tecnico", equipe: "Equipe Peplau" }
};


const menus = {
  gestor: [
    { text: "Identifica√ß√£o - RT", func: "abrirCard('orientacaoCard')" },
    { text: "Cadastro", func: "abrirCard('cardCadastro')" },
    { text: "Registro de intercorr√™ncias", func: "abrirCard('intercorrenciaCard')" }
  ],
  assistencialista: [
    { text: "Identifica√ß√£o - RT", func: "abrirCard('orientacaoCard')" },
    { text: "Admiss√£o de Enfermagem para Aten√ß√£o Domiciliar - Enfermeiro", func: "abrirCard('admissaoCard')" },
    { text: "Consulta de Enfermagem - Enfermeiro", func: "abrirCard('consultaCard')" },
    { text: "Diagn√≥sticos e Interven√ß√µes de Enfermagem - Enfermeiro", func: "abrirCard('cardDiagnostico')" },
    { text: "Encerramento do Cuidado de Enfermagem ‚Äì Aten√ß√£o Domiciliar", func: "abrirCard('altaCard')" },
    { text: "Registro de intercorr√™ncias", func: "abrirCard('intercorrenciaCard')" }
  ],
  tecnico: [
    { text: "Identifica√ß√£o - RT", func: "abrirCard('orientacaoCard')" },
    { text: "Anota√ß√£o de Enfermagem - T√©cnico em Enfermagem", func: "abrirCard('anotacaoCard')" },
    { text: "Registro de intercorr√™ncias", func: "abrirCard('intercorrenciaCard')" }
  ]
};

 function validarMatricula() {
  const matricula = document.getElementById("matricula").value.trim();
  const dadosMatricula = matriculas[matricula];

  if (!dadosMatricula) {
    alert("Matr√≠cula inv√°lida!");
    return;
  }

  const perfil = dadosMatricula.perfil;
  const menu = menus[perfil];

  if (menu) {
    sessionStorage.setItem("perfil", perfil);

    if (dadosMatricula.equipe) {
      sessionStorage.setItem("equipeResponsavel", dadosMatricula.equipe);
    }

    // Mostra tela principal
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('mainScreen').style.display = 'flex';

    // Monta e mostra o menu correto
    montarMenu(perfil);

    // Abre card de boas-vindas
    abrirCard('bemvindoCard');
  } else {
    alert("Perfil sem permiss√µes definidas.");
  }
}

    function montarMenu(perfil) {
    const sidebar = document.getElementById('sidebar');

    // Cria os bot√µes do menu de acordo com o perfil
    menus[perfil].forEach(item => {
    const btn = document.createElement('button');
    btn.innerText = item.text;
    btn.setAttribute('onclick', item.func);
    sidebar.appendChild(btn);
    });

    // Cria o bot√£o de logout no final do menu
    const btnLogout = document.createElement('button');
    btnLogout.innerText = "Sair";
    btnLogout.onclick = logout;
    sidebar.appendChild(btnLogout);
    }

function logout() {
  // Esconde tela principal e menu
  document.getElementById('mainScreen').style.display = 'none';

  // Esconde qualquer card aberto
  const cards = document.querySelectorAll('.card');
  cards.forEach(c => c.style.display = 'none');

  // Limpa menu lateral
  document.getElementById('sidebar').innerHTML = '<h2>Menu</h2>';

  // Limpa campo matr√≠cula
  document.getElementById('matricula').value = '';

  // Retorna para tela login
  document.getElementById('loginScreen').style.display = 'flex';
}

function logout() {
  const confirmLogout = confirm("Deseja realmente sair?");
  if (!confirmLogout) return;

  document.getElementById('mainScreen').style.display = 'none';
  const cards = document.querySelectorAll('.card');
  cards.forEach(c => c.style.display = 'none');
  document.getElementById('sidebar').innerHTML = '<h2>Menu</h2>';
  document.getElementById('matricula').value = '';
  document.getElementById('loginScreen').style.display = 'flex';
}

  function updateSondaStatus(sondaId) {
  const select = document.getElementById(sondaId);
  const statusField = document.getElementById(`${sondaId}_STATUS`);
  
  if (select.value === "Presente") {
    statusField.disabled = false;
    statusField.placeholder = "Descreva a situa√ß√£o: funcional, obstru√≠da, etc.";
  } else {
    statusField.value = ""; // limpa o campo
    statusField.disabled = true;
    statusField.placeholder = "Ex.: Funcional, obstru√≠da...";
  }
}

    // Fun√ß√£o envio Admiss√£o
    function enviarAdmissao() {
      const form = document.getElementById("formAdmissao");
      const dados = Object.fromEntries(new FormData(form));

      google.script.run
        .withSuccessHandler(() => {
          document.getElementById("msgAdmissao").innerText = "Dados enviados com sucesso!";
          document.getElementById("msgAdmissao").className = "success";
          form.reset();
        })
        .withFailureHandler(() => {
          document.getElementById("msgAdmissao").innerText = "Erro ao enviar!";
          document.getElementById("msgAdmissao").className = "error";
        })
        .salvarDadosAdmissao(dados);
    }

  function salvarDadosAdmissao(dados) {
  const sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Admissao');
  sheet.appendRow([
    new Date(), 
    dados.nomePaciente,
    dados.nomeId,
    dados.dataNascimento,
    dados.sexo,
    dados.equipe,
    dados.dataHora,
    dados.statusAtendimento,
    dados.procedencia,
    dados.condicoesChegada,
    dados.nivelConsciencia,
    dados.acompanhante,
    dados.higiene,
    dados.lesoes,
    dados.deficiencias,
    dados.protese,
    dados.queixas,
    dados.procedimentos,
    dados.orientacoes,
    dados.percepcaoSensorial,  // Campo Braden
    dados.umidade,
    dados.atividade,
    dados.mobilidade,
    dados.nutricao,
    dados.friccao,
    dados.pontuacaoBraden,
    dados.interpretacaoBraden, // NOVO
    dados.historicoQueda,      // Campo Morse
    dados.diagnosticoSecundario,
    dados.auxilioDeambulacao,
    dados.terapiaIV,
    dados.marcha,
    dados.estadoMental,
    dados.pontuacaoMorse,
    dados.interpretacaoMorse,  // NOVO
    dados.responsavel
  ]);
}

    // Fun√ß√£o envio Anota√ß√£o de T√©cnico em Enfermagem
    function enviarAnotacao() {
      const form = document.getElementById("formAnotacao");
      const dados = Object.fromEntries(new FormData(form));

      google.script.run
        .withSuccessHandler(() => {
          document.getElementById("msgAnotacao").innerText = "Anota√ß√£o de Enfermagem enviada!";
          document.getElementById("msgAnotacao").className = "success";
          form.reset();
        })
        .withFailureHandler(() => {
          document.getElementById("msgAnotacao").innerText = "Erro!";
          document.getElementById("msgAnotacao").className = "error";
        })
        .salvarDadosAnotacao(dados);
    }

    // Fun√ß√£o envio Alta
    function enviarAlta() {
      const form = document.getElementById("formAlta");
      const dados = Object.fromEntries(new FormData(form));

      google.script.run
        .withSuccessHandler(() => {
          document.getElementById("msgAlta").innerText = "Encerramento do plano de cuidado!";
          document.getElementById("msgAlta").className = "success";
          form.reset();
        })
        .withFailureHandler(() => {
          document.getElementById("msgAlta").innerText = "Erro!";
          document.getElementById("msgAlta").className = "error";
        })
        .salvarDadosAlta(dados);
    }

    // Fun√ß√£o envio Consulta de Enfermagem
    function enviarConsulta() {
      const form = document.getElementById("formConsulta");
      const dados = Object.fromEntries(new FormData(form));

      google.script.run
        .withSuccessHandler(() => {
          document.getElementById("msgConsulta").innerText = "Consulta de Enfermagem registrada!";
          document.getElementById("msgConsulta").className = "success";
          form.reset();
        })
        .withFailureHandler(() => {
          document.getElementById("msgConsulta").innerText = "Erro!";
          document.getElementById("msgConsulta").className = "error";
        })
        .salvarDadosConsulta(dados);
    }

    // Fun√ß√£o envio Intercorr√™ncias Cl√≠nicas
    function enviarIntercorrencia() {
      const form = document.getElementById("formIntercorrencia");
      const dados = Object.fromEntries(new FormData(form));

      google.script.run
        .withSuccessHandler(() => {
          document.getElementById("msgIntercorrencia").innerText = "Intercorr√™ncia registrada!";
          document.getElementById("msgIntercorrencia").className = "success";
          form.reset();
        })
        .withFailureHandler(() => {
          document.getElementById("msgIntercorrencia").innerText = "Erro!";
          document.getElementById("msgIntercorrencia").className = "error";
        })
        .salvarDadosIntercorrencia(dados);
    }

function toggleOutroCategoria(select) {
const campoOutro = document.getElementById('campoOutroCategoria');
campoOutro.style.display = select.value === 'Outro' ? 'block' : 'none';
  }

function toggleNotificacaoDetalhada(select) {
const campo = document.getElementById('campoDetalheNotificacao');
campo.style.display = select.value === 'Sim' ? 'block' : 'none';
  }


    function calcularBraden() {
  const sensorial = parseInt(document.querySelector('[name="percepcaoSensorial"]').value) || 0;
  const umidade = parseInt(document.querySelector('[name="umidade"]').value) || 0;
  const atividade = parseInt(document.querySelector('[name="atividade"]').value) || 0;
  const mobilidade = parseInt(document.querySelector('[name="mobilidade"]').value) || 0;
  const nutricao = parseInt(document.querySelector('[name="nutricao"]').value) || 0;
  const friccao = parseInt(document.querySelector('[name="friccao"]').value) || 0;

  const total = sensorial + umidade + atividade + mobilidade + nutricao + friccao;
  document.getElementById('pontuacaoBraden').value = total;

  let interpretacao = "";
  if (total >= 19) {
    interpretacao = "Baixo Risco";
  } else if (total >= 15) {
    interpretacao = "Risco Moderado";
  } else if (total >= 13) {
    interpretacao = "Risco Alto";
  } else {
    interpretacao = "Risco Muito Alto";
  }

  // Exibe na tela
  document.getElementById('interpretacaoBraden').innerText = "Classifica√ß√£o: " + interpretacao;

  // Atualiza o campo oculto para salvar no formul√°rio
  document.getElementById('interpretacaoBradenInput').value = interpretacao;
}

function calcularMorse() {
  const queda = parseInt(document.querySelector('[name="historicoQueda"]').value) || 0;
  const diagnostico = parseInt(document.querySelector('[name="diagnosticoSecundario"]').value) || 0;
  const auxilio = parseInt(document.querySelector('[name="auxilioDeambulacao"]').value) || 0;
  const terapia = parseInt(document.querySelector('[name="terapiaIV"]').value) || 0;
  const marcha = parseInt(document.querySelector('[name="marcha"]').value) || 0;
  const mental = parseInt(document.querySelector('[name="estadoMental"]').value) || 0;

  const total = queda + diagnostico + auxilio + terapia + marcha + mental;
  document.getElementById('pontuacaoMorse').value = total;

  let interpretacao = "";
  if (total >= 45) {
    interpretacao = "Alto Risco de Queda";
  } else if (total >= 25) {
    interpretacao = "Risco Moderado de Queda";
  } else {
    interpretacao = "Baixo Risco de Queda";
  }

  // Exibe na tela
  document.getElementById('interpretacaoMorse').innerText = "Classifica√ß√£o: " + interpretacao;

  // Atualiza o campo oculto para salvar no formul√°rio
  document.getElementById('interpretacaoMorseInput').value = interpretacao;
}


// Fun√ß√£o envio Cadastro de Cliente
    function enviarCadastro() {
      const form = document.getElementById("formCadastro");
      const dados = Object.fromEntries(new FormData(form));

      google.script.run
        .withSuccessHandler(() => {
          document.getElementById("msgCadastro").innerText = "Cadastro de cliente registrado!";
          document.getElementById("msgCadastro").className = "success";
          form.reset();
        })
        .withFailureHandler(() => {
          document.getElementById("msgCadastro").innerText = "Erro!";
          document.getElementById("msgCadastro").className = "error";
        })
        .salvarDadosCadastro(dados);
    }

function gerarIdentificador() {
  google.script.run
    .withSuccessHandler(function (idGerado) {
      document.getElementById('nomeId').value = idGerado;
    })
    .gerarIdUnico(); 
}

function gerarIdUnico() {
  const data = new Date();
  const timestamp = Utilities.formatDate(data, "GMT-3", "yyyyMMddHHmmss");
  return "PRON-" + timestamp;
}

function selecionarEquipe(botao) {
    // Desmarca todos
    document.querySelectorAll('.equipe-btn').forEach(btn => {
      btn.classList.remove('selecionado');
      btn.previousElementSibling.checked = false;
    });

    // Marca o clicado
    botao.classList.add('selecionado');
    botao.previousElementSibling.checked = true;
  }

const classesPorDominio = { "1": ["Conscientiza√ß√£o para a sa√∫de", "Gest√£o da sa√∫de"],
	"2": ["Ingest√£o", "Digest√£o", "Absor√ß√£o", "Metabolismo", "Hidrata√ß√£o"],
	"3": ["Fun√ß√£o Urin√°ria", "Fun√ß√£o Gastrointestinal", "Fun√ß√£o Tegumentar", "Fun√ß√£o Respirat√≥ria"],
	"4": ["Sono/repouso", "Atividade", "Balan√ßa de energia", "Respostas cardiovasculares / pulmonares", "Autocuidado"],
	"5": ["Aten√ß√£o", "Aula de orienta√ß√£o", "Sensa√ß√£o/percep√ß√£o", "Cogni√ß√£o", "Comunica√ß√£o"],
	"6": ["Autoconceito", "Aula de autoestima", "Imagem corporal"],
	"7": ["Fun√ß√£o de cuidado", "Rela√ß√µes familiares", "Desempenho da fun√ß√£o"],
	"8": ["Identidade sexual", "Fun√ß√£o sexual", "Classe de reprodu√ß√£o"],
	"9": ["Respostas p√≥s-traum√°ticas", "Respostas de Enfrentamento", "Estresse neurocomportamental"],
	"10": ["Valores", "Classe de cren√ßa", "Congru√™ncia de valor/cren√ßa/a√ß√£o"],
	"11": ["Infec√ß√£o", "Les√£o f√≠sica", "Viol√™ncia", "Riscos ambientais", "Processos defensivos", "Termoregula√ß√£o"],
	"12": ["Conforto f√≠sico", "Conforto ambiental", "Conforto social"],
	"13": ["Classe de crescimento", "Classe de desenvolvimento"],
 };
const diagnosticosPorClasse = { "Conscientiza√ß√£o para a sa√∫de": ["Diminui√ß√£o do envolvimento de atividades diversivas", "Prontid√£o para melhorar a alfabetiza√ß√£o em sa√∫de", "Estilo de vida sedent√°rio"],
  "Gest√£o da sa√∫de": ["Risco de tentativa de fuga", "S√≠ndrome do idoso fr√°gil", "Risco para s√≠ndrome de idoso fr√°gil", "Prontid√£o para engajamento de exerc√≠cio aprimorado", "Sa√∫de comunit√°ria deficiente", "Comportamento de sa√∫de sujeito a risco", "Comportamentos de manuten√ß√£o eficaz da sa√∫de", "Autogest√£o eficaz da sa√∫de", "Prontid√£o para autogest√£o aprimorada da sa√∫de", "Autogest√£o eficaz da sa√∫de da fam√≠lia", "Comportamentos ineficazes de manuten√ß√£o dom√©stica", "Risco de comportamentos ineficazes de manuten√ß√£o dom√©stica", "Prontid√£o para manuten√ß√£o dom√©stica aprimorada comportamentos", "Prote√ß√£o ineficaz"],

  "Ingest√£o": ["Nutri√ß√£o desequilibrada: menos do que os requisitos corporais", "Prontid√£o para nutri√ß√£o aprimorada", "Produ√ß√£o insuficiente de leite materno", "Amamenta√ß√£o ineficaz", "Amamenta√ß√£o interrompida", "Prontid√£o para amamenta√ß√£o aprimorada", "Din√¢mica alimentar ineficaz de adolescentes", "Din√¢mica alimentar infantil ineficaz", "Din√¢mica de alimenta√ß√£o infantil ineficaz", "Obesidade", "Excesso de peso", "Risco de excesso de peso", "Resposta ineficaz de suc√ß√£o e degluti√ß√£o do beb√™", "Degluti√ß√£o prejudicada"],
  "Digest√£o": ["A classe n√£o possui diagn√≥sticos"],
  "Absor√ß√£o": ["A classe n√£o possui diagn√≥sticos"],
  "Metabolismo": ["Risco de n√≠vel de glicose no sangue inst√°vel", "Hiperbilirrubinemia neonatal", "Risco de hiperbilirrubinemia neonatal", "Risco de insufici√™ncia hep√°tica", "Risco para s√≠ndrome metab√≥lica"],
  "Hidrata√ß√£o": ["Risco de desequil√≠brio eletrol√≠tico", "Risco de volume de fluido desequilibrado", "Volume de fluido deficiente", "Risco de volume de fluido deficiente", "Excesso de volume de fluido"],

  "Fun√ß√£o Urin√°ria": ["Incontin√™ncia urin√°ria associada a defici√™ncia", "Elimina√ß√£o urin√°ria prejudicada", "Incontin√™ncia urin√°ria mista", "Incontin√™ncia urin√°ria de esfor√ßo", "Incontin√™ncia urin√°ria de urg√™ncia", "Risco de incontin√™ncia urin√°ria de urg√™ncia", "Reten√ß√£o urin√°ria", "Risco de reten√ß√£o urin√°ria"],
  "Fun√ß√£o Gastrointestinal": ["Constipa√ß√£o", "Risco de constipa√ß√£o", "Constipa√ß√£o percebida", "Constipa√ß√£o funcional cr√¥nica", "Risco de constipa√ß√£o funcional cr√¥nica", "Contin√™ncia intestinal prejudicada", "Diarreia", "Motilidade gastrointestinal disfuncional", "Risco de motilidade gastrointestinal disfuncional"],
  "Fun√ß√£o Tegumentar": ["A classe n√£o possui diagn√≥sticos"],
  "Fun√ß√£o Respirat√≥ria": ["Troca de gases prejudicada"],

  "Sono/repouso": ["Ins√¥nia", "Priva√ß√£o de sono", "Prontid√£o para sono melhor", "Padr√£o de sono perturbado"],
  "Atividade": ["Toler√¢ncia de atividade diminu√≠da","Risco de diminui√ß√£o da toler√¢ncia √† atividade", "Risco de s√≠ndrome de desuso", "Mobilidade na cama prejudicada", "Mobilidade f√≠sica prejudicada", "Mobilidade em cadeira de rodas prejudicada", "Sess√£o prejudicada", "Posi√ß√£o prejudicada", "Capacidade de transfer√™ncia prejudicada", "Caminhada prejudicada"],
  "Balan√ßa de energia":["Campo de energia desequilibrado", "Fadiga", "Errante"],
  "Respostas cardiovasculares / pulmonares": ["Padr√£o de respira√ß√£o ineficaz", "Diminui√ß√£o do d√©bito card√≠aco", "Risco de diminui√ß√£o do d√©bito card√≠aco", "Risco de fun√ß√£o cardiovascular prejudicada", "Autogest√£o de linfedema ineficaz", "Risco de autogerenciamento de linfedema ineficaz", "Ventila√ß√£o espont√¢nea prejudicada", "Risco de press√£o arterial inst√°vel", "Risco de trombose", "Risco de diminui√ß√£o da perfus√£o do tecido card√≠aco", "Risco de perfus√£o de tecido cerebral ineficaz", "Perfus√£o tecidual perif√©rica ineficaz", "Risco de perfus√£o tecidual perif√©rica ineficaz", "Resposta disfuncional ao desmame ventilat√≥rio", "Resposta disfuncional ao desmame ventilat√≥rio de adulto"],
  "Autocuidado": ["D√©ficit de autocuidado no banho", "D√©ficit de autocuidado de vestir", "D√©ficit de autocuidado alimentar", "D√©ficit de autocuidado sanit√°rio", "Prontid√£o para autocuidado aprimorado", "Abandono"],

  "Aten√ß√£o": ["Neglig√™ncia unilateral"],
  "Aula de orienta√ß√£o": ["A classe n√£o possui diagn√≥sticos"],
  "Sensa√ß√£o/percep√ß√£o": ["A classe n√£o possui diagn√≥sticos"],
  "Cogni√ß√£o": ["Confus√£o aguda", "Risco de confus√£o aguda", "Confus√£o cr√¥nica", "Controle emocional inst√°vel", "Controle de impulso ineficaz", "Conhecimento deficiente", "Prontid√£o para conhecimento aprimorado", "Mem√≥ria prejudicada", "Processo de pensamento perturbado"],
  "Comunica√ß√£o": ["Prontid√£o para comunica√ß√£o aprimorada", "Comunica√ß√£o verbal prejudicada"],

  "Autoconceito": ["Desesperan√ßa", "Prontid√£o para esperan√ßa aumentada", "Risco de comprometimento da dignidade humana", "Identidade pessoal perturbada", "Risco de identidade pessoal perturbada", "Prontid√£o para autoconceito aprimorado "],
  "Aula de autoestima": ["Baixa autoestima cr√¥nica", "Risco de baixa autoestima cr√¥nica", "Baixa autoestima situacional", "Risco de baixa autoestima situacional"],
  "Imagem corporal": ["Imagem corporal perturbada"],

  "Fun√ß√£o de cuidado": ["Paternidade prejudicada", "Risco para paternidade prejudicada", "Prontid√£o para paternidade aprimorada", "Cepa de fun√ß√£o de cuidador", "Risco para tens√£o de fun√ß√£o de cuidador"],
  "Rela√ß√µes familiares": ["Risco para anexo prejudicado", "S√≠ndrome de identidade familiar perturbada", "Risco para s√≠ndrome de identidade familiar perturbada", "Processos familiares disfuncionais", "Processos familiares interrompidos", "Prontid√£o para processos familiares aprimorados"],
  "Desempenho da fun√ß√£o": ["Relacionamento ineficaz", "Risco de relacionamento ineficaz", "Prontid√£o para relacionamento aprimorado", "Conflito de papel parental", "Desempenho de fun√ß√£o ineficaz", "Intera√ß√£o social prejudicada"],

  "Identidade sexual": ["A classe n√£o possui diagn√≥sticos"],
  "Fun√ß√£o sexual": ["Disfun√ß√£o sexual", "Padr√£o de sexualidade ineficaz"],
  "Classe de reprodu√ß√£o": ["Processo de procria√ß√£o ineficaz", "Risco de processo de procria√ß√£o ineficaz", "Prontid√£o para um processo reprodutivo aprimorado", "Risco de d√≠ade materno-fetal perturbada"],

  "Respostas p√≥s-traum√°ticas": ["Risco de transi√ß√£o de imigra√ß√£o complicada", "S√≠ndrome p√≥s-trauma", "Risco para s√≠ndrome p√≥s-trauma", "S√≠ndrome de estupro-trauma", "S√≠ndrome de estresse de realoca√ß√£o", "Risco para s√≠ndrome de estresse de realoca√ß√£o"],
  "Respostas de Enfrentamento": ["Planejamento de atividades ineficazes", "Risco de planejamento ineficaz de atividades", "Ansiedade", "Coping defensivo", "Enfrentamento ineficaz", "Prontid√£o para enfrentamento aprimorado", "Enfrentamento ineficaz da comunidade", "Prontid√£o para lidar melhor com a comunidade", "Enfrentamento familiar comprometido", "Enfrentamento familiar com defici√™ncia", "Prontid√£o para enfrentamento familiar aprimorado", "Ansiedade da morte", "Nega√ß√£o ineficaz", "Temer", "Luto desadaptativo", "Risco de luto n√£o adaptativo", "Prontid√£o para luto intensificado", "Regula√ß√£o do humor prejudicada", "Impot√™ncia", "Risco de impot√™ncia", "Prontid√£o para maior pot√™ncia", "Resili√™ncia prejudicada", "Risco de resili√™ncia prejudicada", "Prontid√£o para maior resili√™ncia", "Tristeza cr√¥nica", "Sobrecarga de estresse"],
  "Estresse neurocomportamental": ["S√≠ndrome de abstin√™ncia aguda de subst√¢ncia", "Risco de s√≠ndrome de abstin√™ncia aguda de subst√¢ncia", "Disreflexia auton√¥mica", "Risco de disreflexia auton√¥mica", "S√≠ndrome de abstin√™ncia neonatal", "Comportamento infantil desorganizado", "Risco de comportamento infantil desorganizado", "Prontid√£o para um comportamento infantil organizado aprimorado"],

  "Valores": ["A classe n√£o possui diagn√≥sticos"],
  "Classe de cren√ßa": ["Prontid√£o para um bem-estar espiritual aprimorado"],
  "Congru√™ncia de valor/cren√ßa/a√ß√£o": ["Prontid√£o para tomada de decis√£o aprimorada", "Conflito de decis√£o", "Tomada de decis√£o emancipada prejudicada", "Risco para tomada de decis√£o emancipada prejudicada", "Prontid√£o para tomada de decis√£o emancipada aprimorada", "Ang√∫stia moral", "Religiosidade prejudicada", "Risco de religiosidade prejudicada", "Prontid√£o para religiosidade aprimorada", "Ang√∫stia espiritual", "Risco de ang√∫stia espiritual"],

  "Infec√ß√£o": ["Risco de infec√ß√£o", "Risco de infec√ß√£o de s√≠tio cir√∫rgico"],
  "Les√£o f√≠sica": ["Desobstru√ß√£o ineficaz das vias a√©reas", "Risco de aspira√ß√£o", "Risco de sangramento", "Denti√ß√£o prejudicada", "Risco de olho seco", "Autogest√£o ineficaz de olho seco", "Risco de boca seca", "Risco de quedas em adultos", "Risco de queda de crian√ßa", "Risco de les√£o", "Risco de les√£o da c√≥rnea", "Les√£o do complexo areolopapilar", "Risco de les√£o do complexo areolopapilar", "Risco de les√£o do trato urin√°rio", "Risco de les√£o de posicionamento perioperat√≥ria", "Risco de les√£o t√©rmica", "Integridade da membrana mucosa oral prejudicada", "Risco de integridade da membrana mucosa oral prejudicada", "Risco de disfun√ß√£o neurovascular perif√©rica", "Risco de trauma f√≠sico", "Risco de trauma vascular", "Les√£o de press√£o em adulto", "Risco de les√£o por press√£o em adulto", "Les√£o infantil por press√£o", "Risco de les√£o por press√£o infantil", "Les√£o por press√£o neonatal", "Risco de les√£o por press√£o neonatal", "Risco de choque", "Integridade da pele prejudicada", "Risco de integridade da pele prejudicada", "Risco de morte s√∫bita infantil", "Risco de sufoca√ß√£o", "Recupera√ß√£o cir√∫rgica retardada", "Risco de recupera√ß√£o cir√∫rgica retardada", "Integridade do tecido prejudicada", "Risco de integridade do tecido prejudicada"],
  "Viol√™ncia": ["Risco de mutila√ß√£o genital feminina", "Risco de viol√™ncia dirigida por outros", "Risco de viol√™ncia autodirigida", "Auto-mutila√ß√£o", "Risco de automutila√ß√£o", "Risco de comportamento suicida"],
  "Riscos ambientais": ["Contamina√ß√£o", "Risco de contamina√ß√£o", "Risco de les√£o ocupacional", "Risco de envenenamento"],
  "Processos defensivos": ["Risco de rea√ß√£o adversa ao meio de contraste iodado", "Risco de rea√ß√£o al√©rgica", "Risco de rea√ß√£o al√©rgica ao l√°tex"],
  "Termoregula√ß√£o": ["Hipertermia", "Hipotermia", "Risco de hipotermia", "Hipotermia neonatal", "Risco de hipotermia neonatal", "Risco de hipotermia perioperat√≥ria", "Termorregula√ß√£o ineficaz", "Risco de termorregula√ß√£o ineficaz"],

  "Conforto f√≠sico": ["Conforto prejudicado", "Prontid√£o para maior conforto", "N√°usea", "Dor aguda", "Dor cr√¥nica", "S√≠ndrome de dor cr√¥nica", "Dor de parto"],
  "Conforto ambiental": ["Conforto prejudicado", "Prontid√£o para maior conforto"],
  "Conforto social": ["Conforto prejudicado", "Prontid√£o para maior conforto", "Risco de solid√£o", "Isolamento social"],

  "Classe de crescimento": ["A classe n√£o possui diagn√≥sticos"],
  "Classe de desenvolvimento": ["Desenvolvimento infantil retardado", "Risco de atraso no desenvolvimento infantil", "Atraso no desenvolvimento motor infantil", "Risco de atraso no desenvolvimento motor infantil"],
 };

function atualizarClasses() {
  const dominio = document.getElementById("dominioSelect").value;
  const classeSelect = document.getElementById("classeSelect");
  classeSelect.innerHTML = '<option value="" disabled selected>Selecione...</option>';

  if (classesPorDominio[dominio]) {
    classesPorDominio[dominio].forEach(classe => {
      const opt = document.createElement("option");
      opt.value = classe;
      opt.textContent = classe;
      classeSelect.appendChild(opt);
    });
    document.getElementById("classeBox").style.display = "block";
  }
}

const listaDiagnosticos = [];

function adicionarDiagnostico() {
  const diagnostico = document.getElementById("diagnosticoSelect").value;
  if (!diagnostico) return alert("Selecione um diagn√≥stico.");

  // Verifica se j√° foi adicionado
  const jaExiste = listaDiagnosticos.find(item => item.diagnostico === diagnostico);
  if (jaExiste) return alert("Este diagn√≥stico j√° foi adicionado.");

  const index = listaDiagnosticos.length;
  const idUnico = `diag-${Date.now()}-${index}`; // id √∫nico por seguran√ßa

  listaDiagnosticos.push({
    id: idUnico,
    diagnostico,
    prescricao: "",
    intervencao: ""
  });

  const container = document.getElementById("listaDiagnosticos");
  const box = document.createElement("div");
  box.className = "diagnostico-item";
  box.id = idUnico;
  box.innerHTML = `
    <p><strong>ü©∫ Diagn√≥stico:</strong> ${diagnostico}</p>
    <label>üìã Prescri√ß√£o de Enfermagem:</label>
    <textarea rows="2" placeholder="Ex: Realizar curativo..." onchange="atualizarPrescricao('${idUnico}', this.value)"></textarea>
    <label>üõ†Ô∏è Interven√ß√µes de Enfermagem:</label>
    <textarea rows="2" placeholder="Ex: Avaliar ferida diariamente..." onchange="atualizarIntervencao('${idUnico}', this.value)"></textarea>
    <button type="button" onclick="removerDiagnostico('${idUnico}')">‚ùå Remover</button>
    <hr>
  `;
  container.appendChild(box);
  document.getElementById("diagnosticosSalvosBox").style.display = "block";
}

function atualizarPrescricao(id, valor) {
  const item = listaDiagnosticos.find(el => el.id === id);
  if (item) item.prescricao = valor;
}

function atualizarIntervencao(id, valor) {
  const item = listaDiagnosticos.find(el => el.id === id);
  if (item) item.intervencao = valor;
}

function removerDiagnostico(id) {
  // Remove da lista
  const index = listaDiagnosticos.findIndex(el => el.id === id);
  if (index !== -1) listaDiagnosticos.splice(index, 1);

  // Remove do DOM
  const elemento = document.getElementById(id);
  if (elemento) elemento.remove();

  // Esconde o quadro se n√£o houver mais nada
  if (listaDiagnosticos.length === 0) {
    document.getElementById("diagnosticosSalvosBox").style.display = "none";
  }
}

function enviarDiagnosticos() {
  const form = document.getElementById("formDiagnostico");
  const dadosForm = new FormData(form);

  const data = dadosForm.get("data");
  const nomePaciente = dadosForm.get("nomePaciente");
  const nomeId = dadosForm.get("nomeId");
  const responsavel = document.getElementById("responsavelDiagnostico").value;

  if (!responsavel) return alert("Informe o nome do respons√°vel.");
  if (listaDiagnosticos.length === 0) return alert("Adicione ao menos um diagn√≥stico.");

  const dados = {
    data,
    nomePaciente,
    nomeId,
    responsavel,
    diagnosticos: listaDiagnosticos
  };

  google.script.run
    .withSuccessHandler(() => {
      document.getElementById("msgDiagnostico").textContent = "Diagn√≥sticos enviados com sucesso!";
      document.getElementById("msgDiagnostico").className = "success";
      form.reset();
      listaDiagnosticos.length = 0;
      document.getElementById("listaDiagnosticos").innerHTML = "";
      document.getElementById("diagnosticosSalvosBox").style.display = "none";
    })
    .withFailureHandler(() => {
      document.getElementById("msgDiagnostico").textContent = "Erro ao enviar.";
      document.getElementById("msgDiagnostico").className = "error";
    })
    .salvarDadosDiagnosticos(dados);
}

function atualizarTitulos() {
  const classe = document.getElementById("classeSelect").value;
  console.log("Classe selecionada:", classe); // ‚Üê VERIFICA√á√ÉO

  const diagnosticoSelect = document.getElementById("diagnosticoSelect");
  diagnosticoSelect.innerHTML = '<option value="" disabled selected>Selecione...</option>';

  if (diagnosticosPorClasse[classe]) {
    diagnosticosPorClasse[classe].forEach(diagnostico => {
      const opt = document.createElement("option");
      opt.value = diagnostico;
      opt.textContent = diagnostico;
      diagnosticoSelect.appendChild(opt);
    });
    document.getElementById("diagnosticoBox").style.display = "block";
  } else {
    console.log("‚ùå Classe n√£o encontrada no objeto diagnosticosPorClasse");
  }
}

// Carregar Dom√≠nios ao iniciar a p√°gina
function carregarDominios() {
  const dominioSelect = document.getElementById("dominioSelect");
  dominioSelect.innerHTML = '<option value="" disabled selected>Selecione...</option>';
  
  for (let id in classesPorDominio) {
    const opt = document.createElement("option");
    opt.value = id;
    opt.textContent = getNomeDominioPorId(id);
    dominioSelect.appendChild(opt);
  }
}

// Mapeia os nomes dos Dom√≠nios conforme os valores usados no select original
function getNomeDominioPorId(id) {
  const nomes = {
    "1": "Promo√ß√£o da Sa√∫de",
    "2": "Nutri√ß√£o",
    "3": "Elimina√ß√£o e Troca",
    "4": "Atividade/Repouso",
    "5": "Percep√ß√£o/Cogni√ß√£o",
    "6": "Autopercep√ß√£o",
    "7": "Rela√ß√£o de fun√ß√£o",
    "8": "Sexualidade",
    "9": "Enfrentamento/Toler√¢ncia ao estresse",
    "10": "Princ√≠pios de vida",
    "11": "Seguran√ßa/prote√ß√£o",
    "12": "Conforto",
    "13": "Crescimento/desenvolvimento"
  };
  return nomes[id] || `Dom√≠nio ${id}`;
}

// Chamada no carregamento da p√°gina
window.onload = carregarDominios;


 //Preenche a lista suspensa ao abrir o card
 function carregarPacientesAdmissao() {
  const select = document.getElementById("listaPacientes");
 select.innerHTML = '<option value="">Selecione...</option>';

 pacientes.forEach(p => {
   const option = document.createElement("option");
    option.value = p.nomeId;
   option.textContent = p.nomePaciente;
   select.appendChild(option);
  });
 }

let pacientes = [
  { nomePaciente: "Benedita Souza Pereira", nomeId: "75514", dataNascimento: "1942-03-12", sexo: "Feminino", equipe: "Equipe Florence", status: "Ativo" },
  { nomePaciente: "Carlos Henrique Lima", nomeId: "82059", dataNascimento: "1987-06-25", sexo: "Masculino", equipe: "Equipe Horta", status: "Ativo" },
  { nomePaciente: "Ana Lu√≠sa Fernandes Batista", nomeId: "82553", dataNascimento: "2018-11-14", sexo: "Feminino", equipe: "Equipe Peplau", status: "Ativo" },
  { nomePaciente: "Jo√£o Batista de Moura", nomeId: "82816", dataNascimento: "1958-01-07", sexo: "Masculino", equipe: "Equpe Nery", status: "Ativo" },
  { nomePaciente: "H√©lio C√©sar Miranda Lopes", nomeId: "55317", dataNascimento: "1965-09-28", sexo: "Masculino", equipe: "Equipe Florence", status: "Ativo" },
  { nomePaciente: "Lourdes Ferreira da Costa", nomeId: "97091", dataNascimento: "1936-04-03", sexo: "Feminino", equipe: "Equipe Horta", status: "Ativo" },
  { nomePaciente: "Rafael Teixeira Gomes", nomeId: "48569", dataNascimento: "2008-05-18", sexo: "Masculino", equipe: "Equipe Peplau", status: "Ativo" },
  { nomePaciente: "Sebasti√£o Alves de Andrade", nomeId: "12213", dataNascimento: "1947-02-01", sexo: "Masculino", equipe: "Equpe Nery", status: "Ativo" },
  { nomePaciente: "Ant√¥nio Carlos Vieira Lopes", nomeId: "53430", dataNascimento: "1955-12-19", sexo: "Masculino", equipe: "Equipe Florence", status: "Ativo" },
  { nomePaciente: "Maria Jos√© da Concei√ß√£o", nomeId: "23148", dataNascimento: "1949-10-22", sexo: "Feminino", equipe: "Equipe Horta", status: "Ativo" },
  { nomePaciente: "Geraldo Jos√© Pacheco", nomeId: "23149", dataNascimento: "1943-03-15", sexo: "Masculino", equipe: "Equipe Peplau", status: "Ativo" },
  { nomePaciente: "Neusa Almeida Figueiredo", nomeId: "20024", dataNascimento: "1940-07-10", sexo: "Feminino", equipe: "Equpe Nery", status: "Ativo" },
  { nomePaciente: "Bruno C√©sar Fernandes", nomeId: "39970", dataNascimento: "1994-09-23", sexo: "Masculino", equipe: "Equipe Florence", status: "Ativo" },
  { nomePaciente: "Sebastiana Nogueira Ramos", nomeId: "39920", dataNascimento: "1933-01-29", sexo: "Feminino", equipe: "Equipe Horta", status: "Ativo" },
  { nomePaciente: "Isadora Lima de Assis", nomeId: "45688", dataNascimento: "2015-10-30", sexo: "Feminino", equipe: "Equipe Peplau", status: "Ativo" },
  { nomePaciente: "Adriana Pereira dos Santos", nomeId: "73157", dataNascimento: "1973-11-05", sexo: "Feminino", equipe: "Equpe Nery", status: "Ativo" },
  { nomePaciente: "Domingos Ribeiro de Souza", nomeId: "54665", dataNascimento: "1950-08-17", sexo: "Masculino", equipe: "Equipe Florence", status: "Ativo" },
  { nomePaciente: "Carolina Nunes Ferreira", nomeId: "81038", dataNascimento: "1989-04-09", sexo: "Feminino", equipe: "Equipe Horta", status: "Ativo" },
  { nomePaciente: "Alcides Oliveira Ramos", nomeId: "92105", dataNascimento: "1945-02-02", sexo: "Masculino", equipe: "Equipe Peplau", status: "Ativo" },
  { nomePaciente: "Rosa Maria Tavares Lima", nomeId: "71150", dataNascimento: "1956-05-12", sexo: "Feminino", equipe: "Equpe Nery", status: "Ativo" },
  { nomePaciente: "Rosa Maria Tavares Lima", nomeId: "71150", dataNascimento: "1956-05-12", sexo: "Feminino", equipe: "Equpe Nery" },
{ nomePaciente: "Jos√© Alberto de Lima", nomeId: "10457", dataNascimento: "1994-01-10", sexo: "Feminino", equipe: "Equipe Nery" },
{ nomePaciente: "Maria Clara Sanches", nomeId: "23984", dataNascimento: "2005-11-02", sexo: "Feminino", equipe: "Equipe Horta" },
{ nomePaciente: "Luana Beatriz Rocha", nomeId: "34712", dataNascimento: "1986-01-23", sexo: "Masculino", equipe: "Equipe Horta" },
{ nomePaciente: "Pedro Henrique Soares", nomeId: "45896", dataNascimento: "1950-03-24", sexo: "Masculino", equipe: "Equipe Florence" },
{ nomePaciente: "Joana Ribeiro da Costa", nomeId: "56231", dataNascimento: "2011-03-09", sexo: "Feminino", equipe: "Equipe Florence" },
{ nomePaciente: "Carlos Eduardo Neves", nomeId: "67320", dataNascimento: "2017-01-24", sexo: "Feminino", equipe: "Equipe Horta" },
{ nomePaciente: "Aline Ferreira Dutra", nomeId: "78154", dataNascimento: "1956-07-22", sexo: "Masculino", equipe: "Equipe Peplau" },
{ nomePaciente: "Mateus Oliveira Silva", nomeId: "89631", dataNascimento: "1959-12-19", sexo: "Masculino", equipe: "Equipe Florence" },
{ nomePaciente: "S√¥nia Maria Fernandes", nomeId: "90528", dataNascimento: "2014-06-13", sexo: "Masculino", equipe: "Equipe Florence" },
{ nomePaciente: "Gustavo Lima Bastos", nomeId: "31467", dataNascimento: "1978-05-19", sexo: "Feminino", equipe: "Equipe Horta" },
{ nomePaciente: "Ant√¥nio Jos√© de Almeida", nomeId: "42689", dataNascimento: "1977-11-14", sexo: "Masculino", equipe: "Equipe Nery" },
{ nomePaciente: "Ros√¢ngela Maria da Luz", nomeId: "53701", dataNascimento: "1958-05-23", sexo: "Masculino", equipe: "Equipe Florence" },
{ nomePaciente: "Jo√£o Pedro Lima Marques", nomeId: "64938", dataNascimento: "1958-12-05", sexo: "Feminino", equipe: "Equipe Peplau" },
{ nomePaciente: "Ana Beatriz Ferreira", nomeId: "75210", dataNascimento: "1981-04-03", sexo: "Feminino", equipe: "Equipe Nery" },
{ nomePaciente: "Carlos Henrique Faria", nomeId: "84329", dataNascimento: "1992-12-07", sexo: "Masculino", equipe: "Equipe Peplau" },
{ nomePaciente: "Gabriela Duarte dos Santos", nomeId: "91672", dataNascimento: "1959-10-26", sexo: "Masculino", equipe: "Equipe Nery" },
{ nomePaciente: "Valdir Aparecido Silva", nomeId: "28790", dataNascimento: "2006-01-19", sexo: "Masculino", equipe: "Equipe Nery" },
{ nomePaciente: "Marta Helena Cunha", nomeId: "36142", dataNascimento: "1944-07-30", sexo: "Feminino", equipe: "Equipe Florence" },
{ nomePaciente: "F√°bio Leandro Rocha", nomeId: "47850", dataNascimento: "2004-12-08", sexo: "Masculino", equipe: "Equipe Nery" },
{ nomePaciente: "Camila Torres de Melo", nomeId: "58921", dataNascimento: "1984-08-20", sexo: "Feminino", equipe: "Equipe Nery" },
{ nomePaciente: "Rafael Augusto Paiva", nomeId: "69347", dataNascimento: "1944-04-12", sexo: "Masculino", equipe: "Equipe Horta" },
{ nomePaciente: "Helena Cristina Braga", nomeId: "70415", dataNascimento: "1972-02-22", sexo: "Masculino", equipe: "Equipe Peplau" },
{ nomePaciente: "Luiz Fernando Camargo", nomeId: "81596", dataNascimento: "1957-08-16", sexo: "Masculino", equipe: "Equipe Horta" },
{ nomePaciente: "S√≠lvia Regina Pires", nomeId: "92180", dataNascimento: "1944-08-08", sexo: "Feminino", equipe: "Equipe Horta" },
{ nomePaciente: "Eduardo Tavares Filho", nomeId: "63841", dataNascimento: "1952-09-10", sexo: "Feminino", equipe: "Equipe Florence" },
{ nomePaciente: "L√≠via Moura Batista", nomeId: "50783", dataNascimento: "1968-11-11", sexo: "Feminino", equipe: "Equipe Florence" },
{ nomePaciente: "Ricardo Lima da Rocha", nomeId: "43892", dataNascimento: "2006-11-06", sexo: "Masculino", equipe: "Equipe Peplau" },
{ nomePaciente: "Tatiane Ribeiro Lopes", nomeId: "39486", dataNascimento: "1969-10-13", sexo: "Feminino", equipe: "Equipe Peplau" },
{ nomePaciente: "Bruno C√©sar Andrade", nomeId: "14237", dataNascimento: "1983-10-13", sexo: "Masculino", equipe: "Equipe Horta" },
{ nomePaciente: "D√©bora Nunes Ferreira", nomeId: "26830", dataNascimento: "1952-11-07", sexo: "Feminino", equipe: "Equipe Peplau" }
];

  // Preenche os campos ao selecionar um paciente
  function preencherCamposAdmissao() {
    const select = document.getElementById("listaPacientes");
    const valorSelecionado = select.value;
    const pacienteSelecionado = pacientes.find(p => p.nomeId === valorSelecionado);

    if (pacienteSelecionado) {
     // Exibi√ß√£o
document.getElementById("exibeNomeId").value = pacienteSelecionado.nomeId;
document.getElementById("exibeDataNascimento").value = pacienteSelecionado.dataNascimento;
document.getElementById("exibeSexo").value = pacienteSelecionado.sexo;
document.getElementById("exibeEquipe").value = pacienteSelecionado.equipe;

// Envio
document.getElementById("campoNomeIdAdmissao").value = pacienteSelecionado.nomeId;
document.getElementById("campoNomePaciente").value = pacienteSelecionado.nomePaciente;
document.getElementById("campoNascimento").value = pacienteSelecionado.dataNascimento;
document.getElementById("campoSexo").value = pacienteSelecionado.sexo;
document.getElementById("campoEquipe").value = pacienteSelecionado.equipe;


      document.getElementById("dadosPacienteAdmissao").style.display = "block";
    } else {
      document.getElementById("dadosPacienteAdmissao").style.display = "none";
    }
  }

// Chamada ao abrir um card espec√≠fico
function abrirCard(idCard) {
  // Oculta todos os cards
  document.querySelectorAll('.card').forEach(card => card.style.display = 'none');

  // Exibe o card selecionado
  const cardSelecionado = document.getElementById(idCard);
  if (cardSelecionado) {
    cardSelecionado.style.display = 'block';

    // Se for o card de Admiss√£o, carrega a lista de pacientes
    if (idCard === 'admissaoCard') {
      carregarPacientesAdmissao();
    }
  }
}

function preencherCamposPaciente(selectElement) {
  const nomeIdSelecionado = selectElement.value;
  const paciente = pacientes.find(p => p.nomeId === nomeIdSelecionado);
  const form = selectElement.closest("form");

  if (paciente) {
    form.querySelector(".campoNomeId").value = paciente.nomeId;
    form.querySelector(".campoNomePaciente").value = paciente.nomePaciente;
    form.querySelector(".campoNascimento").value = paciente.dataNascimento;
    form.querySelector(".campoSexo").value = paciente.sexo;
    form.querySelector(".campoEquipe").value = paciente.equipe;

    form.querySelector(".exibeNomeId").value = paciente.nomeId;
    form.querySelector(".exibeDataNascimento").value = paciente.dataNascimento;
    form.querySelector(".exibeSexo").value = paciente.sexo;
    form.querySelector(".exibeEquipe").value = paciente.equipe;

    form.querySelector(".dadosPaciente").style.display = "block";
  } else {
    form.querySelector(".dadosPaciente").style.display = "none";
  }
}

function formatarData(data) {
  const d = new Date(data);
  if (isNaN(d)) return data;
  return d.toLocaleDateString('pt-BR');
}

function carregarBotoesPacientes() {
  const container = document.getElementById("botoesPacientes");
  container.innerHTML = '';

  const equipes = {};
  pacientes.forEach(p => {
    if (!equipes[p.equipe]) equipes[p.equipe] = [];
    equipes[p.equipe].push(p);
  });

  for (const equipe in equipes) {
    const titulo = document.createElement("h3");
    titulo.textContent = equipe;
    container.appendChild(titulo);

    const grupo = document.createElement("div");
    grupo.className = "grupo-botoes";

    equipes[equipe].forEach(p => {
      const btn = document.createElement("button");
      btn.type = "button";
      btn.textContent = p.nomePaciente;
      btn.onclick = () => selecionarPaciente(p);
      grupo.appendChild(btn);
    });

    container.appendChild(grupo);
  }
}

function formatarDataExcelParaISO(serialExcel) {
  // Convertendo n√∫mero serial do Excel para data no formato YYYY-MM-DD
  const baseDate = new Date(1899, 11, 30); // base para o Excel
  baseDate.setDate(baseDate.getDate() + parseInt(serialExcel));
  return baseDate.toISOString().split('T')[0]; // Retorna "YYYY-MM-DD"
}

function carregarPacientesNoSelect(selectId, campos) {
  const select = document.getElementById(selectId);
  select.innerHTML = `<option value="">-- Selecione um paciente --</option>`; // Garante que n√£o repete op√ß√µes

  pacientes.forEach((paciente, index) => {
    const option = document.createElement("option");
    option.value = index;
    option.textContent = `${paciente.nomePaciente} - ${paciente.nomeId} - ${paciente.equipe}`;
    select.appendChild(option);
  });

  select.addEventListener("change", () => {
    const selectedIndex = select.value;
    if (selectedIndex !== "") {
      const paciente = pacientes[selectedIndex];
      const nascimentoFormatado = formatarDataExcelParaISO(paciente.dataNascimento);

      // Preenche os campos definidos no objeto "campos"
      document.getElementById(campos.nomeId).value = paciente.nomeId;
      document.getElementById(campos.nome).value = paciente.nomePaciente;
      document.getElementById(campos.nascimento).value = nascimentoFormatado;

      // Se houver campos vis√≠veis
      if (campos.exibeNome) document.getElementById(campos.exibeNome).value = paciente.nomePaciente;
      if (campos.exibeId) document.getElementById(campos.exibeId).value = paciente.nomeId;
      if (campos.exibeNascimento) document.getElementById(campos.exibeNascimento).value = nascimentoFormatado;

      document.getElementById(campos.divConfirmacao).style.display = "block";
    } else {
      document.getElementById(campos.divConfirmacao).style.display = "none";
    }
  });
}

carregarPacientesNoSelect("selectPaciente", {
  nomeId: "campoNomeIdAnotacao",
  nome: "campoNomePaciente",
  nascimento: "campoNascimento",
  exibeNome: "exibeNomePaciente",
  exibeId: "exibeNomeId",
  exibeNascimento: "exibeDataNascimento",
  divConfirmacao: "dadosPacienteAnotacao"
});

carregarPacientesNoSelect("selectPacienteConsulta", {
  nomeId: "campoNomeIdConsulta",
  nome: "campoNomePacienteConsulta",
  nascimento: "campoNascimentoConsulta",
  exibeNome: "exibeNomePacienteConsulta",
  exibeId: "exibeNomeIdConsulta",
  exibeNascimento: "exibeDataNascimentoConsulta",
  divConfirmacao: "dadosPacienteConsulta"
});

carregarPacientesNoSelect("selectPacienteDiagnostico", {
  nomeId: "campoNomeIdDiagnostico",
  nome: "campoNomePacienteDiagnostico",
  nascimento: "campoNascimentoDiagnostico",
  exibeNome: "exibeNomePacienteDiagnostico",
  exibeId: "exibeNomeIdDiagnostico", // voc√™ pode exibir mais se quiser
  exibeNascimento: "exibeDataNascimentoDiagnostico",
  divConfirmacao: "dadosPacienteDiagnostico"
});

carregarPacientesNoSelect("selectPacienteAlta", {
  nomeId: "campoNomeIdAlta",
  nome: "campoNomePacienteAlta",
  nascimento: "campoNascimentoAlta",
  exibeNome: "exibeNomePacienteAlta",
  exibeId: "exibeNomeIdAlta", //
  exibeNascimento: "exibeDataNascimentoAlta",
  divConfirmacao: "dadosPacienteAlta"
});

carregarPacientesNoSelect("selectPacienteIntercorrencia", {
  nomeId: "campoNomeIdIntercorrencia",
  nome: "campoNomePacienteIntercorrencia",
  nascimento: "campoNascimentoIntercorrencia",
  exibeNome: "exibeNomePacienteIntercorrencia",
  exibeId: "exibeNomeIdIntercorrencia", //
  exibeNascimento: "exibeDataNascimentoIntercorrencia",
  divConfirmacao: "dadosPacienteIntercorrencia"
});

</script>

<!-- Blocos adicionados para compatibilidade com script.js -->
<div id="selectEquipe" style="display: none;">
  <p>Conte√∫do para selectEquipe em constru√ß√£o...</p>
</div>
<div id="cardDiagnostico" style="display: none;">
  <p>Conte√∫do para cardDiagnostico em constru√ß√£o...</p>
</div>
<div id="cardAlta" style="display: none;">
  <p>Conte√∫do para cardAlta em constru√ß√£o...</p>
</div>
<div id="cardConsulta" style="display: none;">
  <p>Conte√∫do para cardConsulta em constru√ß√£o...</p>
</div>
<div id="cardAnotacao" style="display: none;">
  <p>Conte√∫do para cardAnotacao em constru√ß√£o...</p>
</div>
<div id="cardIntercorrencia" style="display: none;">
  <p>Conte√∫do para cardIntercorrencia em constru√ß√£o...</p>
</div>
<div id="cardLeitura" style="display: none;">
  <p>Conte√∫do para cardLeitura em constru√ß√£o...</p>
</div>
<div id="cardCadastro" style="display: none;">
  <p>Conte√∫do para cardCadastro em constru√ß√£o...</p>
</div>
<div id="cardAdmissao" style="display: none;">
  <p>Conte√∫do para cardAdmissao em constru√ß√£o...</p>
</div>

</body>
</html>



